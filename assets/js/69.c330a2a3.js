(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{526:function(s,t,a){"use strict";a.r(t);var n=a(25),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"spring-cloud-å…¥é—¨"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-cloud-å…¥é—¨"}},[s._v("#")]),s._v(" Spring Cloud å…¥é—¨")]),s._v(" "),t("br"),s._v(" "),t("blockquote",[t("p",[s._v("æœ¬æ–‡åŸºäº Spring Cloud Netflix")]),s._v(" "),t("p",[s._v("è½¬è½½è‡ªï¼šhttps://juejin.im/post/5de2553e5188256e885f4fa3")])]),s._v(" "),t("p",[s._v("é¦–å…ˆæˆ‘ç»™å¤§å®¶çœ‹ä¸€å¼ å›¾ï¼Œå¦‚æœå¤§å®¶å¯¹è¿™å¼ å›¾æœ‰äº›åœ°æ–¹ä¸å¤ªç†è§£çš„è¯ï¼Œæˆ‘å¸Œæœ›ä½ ä»¬çœ‹å®Œæˆ‘è¿™ç¯‡æ–‡ç« ä¼šæç„¶å¤§æ‚Ÿã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/spring-cloud%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84.jpg",alt:"Spring Cloud æ€»ä½“æ¶æ„"}})]),s._v(" "),t("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯spring-cloud"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯spring-cloud"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯Spring Cloud")]),s._v(" "),t("blockquote",[t("p",[s._v("æ„å»ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸éœ€è¦å¤æ‚å’Œå®¹æ˜“å‡ºé”™ã€‚Spring Cloud ä¸ºæœ€å¸¸è§çš„åˆ†å¸ƒå¼ç³»ç»Ÿæ¨¡å¼æä¾›äº†ä¸€ç§ç®€å•ä¸”æ˜“äºæ¥å—çš„ç¼–ç¨‹æ¨¡å‹ï¼Œå¸®åŠ©å¼€å‘äººå‘˜æ„å»ºæœ‰å¼¹æ€§çš„ã€å¯é çš„ã€åè°ƒçš„åº”ç”¨ç¨‹åºã€‚Spring Cloud æ„å»ºäº Spring Boot ä¹‹ä¸Šï¼Œä½¿å¾—å¼€å‘è€…å¾ˆå®¹æ˜“å…¥æ‰‹å¹¶å¿«é€Ÿåº”ç”¨äºç”Ÿäº§ä¸­ã€‚")])]),s._v(" "),t("p",[s._v("å®˜æ–¹æœç„¶å®˜æ–¹ï¼Œä»‹ç»éƒ½è¿™ä¹ˆæœ‰æ¿æœ‰çœ¼çš„ã€‚")]),s._v(" "),t("p",[s._v("æˆ‘æ‰€ç†è§£çš„ "),t("code",[s._v("Spring Cloud")]),s._v(" å°±æ˜¯å¾®æœåŠ¡ç³»ç»Ÿæ¶æ„çš„ä¸€ç«™å¼è§£å†³æ–¹æ¡ˆï¼Œåœ¨å¹³æ—¶æˆ‘ä»¬æ„å»ºå¾®æœåŠ¡çš„è¿‡ç¨‹ä¸­éœ€è¦åšå¦‚ "),t("strong",[s._v("æœåŠ¡å‘ç°æ³¨å†Œ")]),s._v(" ã€"),t("strong",[s._v("é…ç½®ä¸­å¿ƒ")]),s._v(" ã€"),t("strong",[s._v("æ¶ˆæ¯æ€»çº¿")]),s._v(" ã€"),t("strong",[s._v("è´Ÿè½½å‡è¡¡")]),s._v(" ã€"),t("strong",[s._v("æ–­è·¯å™¨")]),s._v(" ã€"),t("strong",[s._v("æ•°æ®ç›‘æ§")]),s._v(" ç­‰æ“ä½œï¼Œè€Œ Spring Cloud ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€å¥—ç®€æ˜“çš„ç¼–ç¨‹æ¨¡å‹ï¼Œä½¿æˆ‘ä»¬èƒ½åœ¨ Spring Boot çš„åŸºç¡€ä¸Šè½»æ¾åœ°å®ç°å¾®æœåŠ¡é¡¹ç›®çš„æ„å»ºã€‚")]),s._v(" "),t("h2",{attrs:{id:"spring-cloud-çš„ç‰ˆæœ¬"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-cloud-çš„ç‰ˆæœ¬"}},[s._v("#")]),s._v(" Spring Cloud çš„ç‰ˆæœ¬")]),s._v(" "),t("p",[s._v("å½“ç„¶è¿™ä¸ªåªæ˜¯ä¸ªé¢˜å¤–è¯ã€‚")]),s._v(" "),t("p",[t("code",[s._v("Spring Cloud")]),s._v(" çš„ç‰ˆæœ¬å·å¹¶ä¸æ˜¯æˆ‘ä»¬é€šå¸¸è§çš„æ•°å­—ç‰ˆæœ¬å·ï¼Œè€Œæ˜¯ä¸€äº›å¾ˆå¥‡æ€ªçš„å•è¯ã€‚è¿™äº›å•è¯å‡ä¸ºè‹±å›½ä¼¦æ•¦åœ°é“ç«™çš„ç«™åã€‚åŒæ—¶æ ¹æ®å­—æ¯è¡¨çš„é¡ºåºæ¥å¯¹åº”ç‰ˆæœ¬æ—¶é—´é¡ºåºï¼Œæ¯”å¦‚ï¼šæœ€æ—© çš„ "),t("code",[s._v("Release")]),s._v(" ç‰ˆæœ¬ "),t("code",[s._v("Angel")]),s._v("ï¼Œç¬¬äºŒä¸ª "),t("code",[s._v("Release")]),s._v(" ç‰ˆæœ¬ "),t("code",[s._v("Brixton")]),s._v("ï¼ˆè‹±å›½åœ°åï¼‰ï¼Œç„¶åæ˜¯ "),t("code",[s._v("Camden")]),s._v("ã€ "),t("code",[s._v("Dalston")]),s._v("ã€"),t("code",[s._v("Edgware")]),s._v("ã€"),t("code",[s._v("Finchley")]),s._v("ã€"),t("code",[s._v("Greenwich")]),s._v("ã€"),t("code",[s._v("Hoxton")]),s._v("ã€‚")]),s._v(" "),t("h2",{attrs:{id:"spring-cloud-çš„æœåŠ¡å‘ç°æ¡†æ¶-eureka"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#spring-cloud-çš„æœåŠ¡å‘ç°æ¡†æ¶-eureka"}},[s._v("#")]),s._v(" Spring Cloud çš„æœåŠ¡å‘ç°æ¡†æ¶â€”â€”Eureka")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("Eureka")]),s._v("æ˜¯åŸºäº"),t("code",[s._v("REST")]),s._v("ï¼ˆä»£è¡¨æ€§çŠ¶æ€è½¬ç§»ï¼‰çš„æœåŠ¡ï¼Œä¸»è¦åœ¨ "),t("code",[s._v("AWS")]),s._v(" äº‘ä¸­ç”¨äºå®šä½æœåŠ¡ï¼Œä»¥å®ç°è´Ÿè½½å‡è¡¡å’Œä¸­é—´å±‚æœåŠ¡å™¨çš„æ•…éšœè½¬ç§»ã€‚æˆ‘ä»¬ç§°æ­¤æœåŠ¡ä¸º"),t("code",[s._v("Eureka")]),s._v("æœåŠ¡å™¨ã€‚Eurekaè¿˜å¸¦æœ‰ä¸€ä¸ªåŸºäº "),t("code",[s._v("Java")]),s._v(" çš„å®¢æˆ·ç«¯ç»„ä»¶ "),t("code",[s._v("Eureka Client")]),s._v("ï¼Œå®ƒä½¿ä¸æœåŠ¡çš„äº¤äº’å˜å¾—æ›´åŠ å®¹æ˜“ã€‚å®¢æˆ·ç«¯è¿˜å…·æœ‰ä¸€ä¸ªå†…ç½®çš„è´Ÿè½½å¹³è¡¡å™¨ï¼Œå¯ä»¥æ‰§è¡ŒåŸºæœ¬çš„å¾ªç¯è´Ÿè½½å¹³è¡¡ã€‚åœ¨ "),t("code",[s._v("Netflix")]),s._v("ï¼Œæ›´å¤æ‚çš„è´Ÿè½½å‡è¡¡å™¨å°† "),t("code",[s._v("Eureka")]),s._v(" åŒ…è£…èµ·æ¥ï¼Œä»¥åŸºäºæµé‡ï¼Œèµ„æºä½¿ç”¨ï¼Œé”™è¯¯æ¡ä»¶ç­‰å¤šç§å› ç´ æä¾›åŠ æƒè´Ÿè½½å‡è¡¡ï¼Œä»¥æä¾›å‡ºè‰²çš„å¼¹æ€§ã€‚")])]),s._v(" "),t("p",[s._v("æ€»çš„æ¥è¯´ï¼Œ"),t("code",[s._v("Eureka")]),s._v(" å°±æ˜¯ä¸€ä¸ªæœåŠ¡å‘ç°æ¡†æ¶ã€‚ä½•ä¸ºæœåŠ¡ï¼Œä½•åˆä¸ºå‘ç°å‘¢ï¼Ÿ")]),s._v(" "),t("p",[s._v("ä¸¾ä¸€ä¸ªç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼Œå°±æ¯”å¦‚æˆ‘ä»¬å¹³æ—¶ç§Ÿæˆ¿å­æ‰¾ä¸­ä»‹çš„äº‹æƒ…ã€‚")]),s._v(" "),t("p",[s._v("åœ¨æ²¡æœ‰ä¸­ä»‹çš„æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸€ä¸ªä¸€ä¸ªå»å¯»æ‰¾æ˜¯å¦æœ‰æˆ¿å±‹è¦å‡ºç§Ÿçš„æˆ¿ä¸œï¼Œè¿™æ˜¾ç„¶ä¼šéå¸¸çš„è´¹åŠ›ï¼Œä¸€ä½ æ‰¾å‡­ä¸€ä¸ªäººçš„èƒ½åŠ›æ˜¯æ‰¾ä¸åˆ°å¾ˆå¤šæˆ¿æºä¾›ä½ é€‰æ‹©ï¼Œå†è€…ä½ ä¹Ÿæ‡’å¾—è¿™ä¹ˆæ‰¾ä¸‹å»(æ‰¾äº†è¿™ä¹ˆä¹…ï¼Œæ²¡æœ‰åˆé€‚çš„åªèƒ½å°†å°±)ã€‚"),t("strong",[s._v("è¿™é‡Œçš„æˆ‘ä»¬å°±ç›¸å½“äºå¾®æœåŠ¡ä¸­çš„ "),t("code",[s._v("Consumer")]),s._v(" ï¼Œè€Œé‚£äº›æˆ¿ä¸œå°±ç›¸å½“äºå¾®æœåŠ¡ä¸­çš„ "),t("code",[s._v("Provider")]),s._v(" ã€‚æ¶ˆè´¹è€… "),t("code",[s._v("Consumer")]),s._v(" éœ€è¦è°ƒç”¨æä¾›è€… "),t("code",[s._v("Provider")]),s._v(" æä¾›çš„ä¸€äº›æœåŠ¡ï¼Œå°±åƒæˆ‘ä»¬ç°åœ¨éœ€è¦ç§Ÿä»–ä»¬çš„æˆ¿å­ä¸€æ ·ã€‚")])]),s._v(" "),t("p",[s._v("ä½†æ˜¯å¦‚æœåªæ˜¯ç§Ÿå®¢å’Œæˆ¿ä¸œä¹‹é—´è¿›è¡Œå¯»æ‰¾çš„è¯ï¼Œä»–ä»¬çš„æ•ˆç‡æ˜¯å¾ˆä½çš„ï¼Œæˆ¿ä¸œæ‰¾ä¸åˆ°ç§Ÿå®¢èµšä¸åˆ°é’±ï¼Œç§Ÿå®¢æ‰¾ä¸åˆ°æˆ¿ä¸œä½ä¸äº†æˆ¿ã€‚æ‰€ä»¥ï¼Œåæ¥æˆ¿ä¸œè‚¯å®šå°±æƒ³åˆ°äº†å¹¿æ’­è‡ªå·±çš„æˆ¿æºä¿¡æ¯(æ¯”å¦‚åœ¨è¡—è¾¹è´´è´´å°å¹¿å‘Š)ï¼Œè¿™æ ·å¯¹äºæˆ¿ä¸œæ¥è¯´å·²ç»å®Œæˆä»–çš„ä»»åŠ¡(å°†æˆ¿æºå…¬å¸ƒå‡ºå»)ï¼Œä½†æ˜¯æœ‰ä¸¤ä¸ªé—®é¢˜å°±å‡ºç°äº†ã€‚ç¬¬ä¸€ã€å…¶ä»–ä¸æ˜¯ç§Ÿå®¢çš„éƒ½èƒ½æ”¶åˆ°è¿™ç§ç§Ÿæˆ¿æ¶ˆæ¯ï¼Œè¿™åœ¨ç°å®ä¸–ç•Œæ²¡ä»€ä¹ˆï¼Œä½†æ˜¯åœ¨è®¡ç®—æœºçš„ä¸–ç•Œä¸­å°±ä¼šå‡ºç° "),t("strong",[s._v("èµ„æºæ¶ˆè€—")]),s._v(" çš„é—®é¢˜äº†ã€‚ç¬¬äºŒã€ç§Ÿå®¢è¿™æ ·è¿˜æ˜¯å¾ˆéš¾æ‰¾åˆ°ä½ ï¼Œè¯•æƒ³ä¸€ä¸‹æˆ‘éœ€è¦ç§Ÿæˆ¿ï¼Œæˆ‘è¿˜éœ€è¦ä¸œä¸€ä¸ªè¥¿ä¸€ä¸ªåœ°å»æ‰¾è¡—è¾¹å°å¹¿å‘Šï¼Œéº»ä¸éº»çƒ¦ï¼Ÿ")]),s._v(" "),t("p",[s._v("é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿæˆ‘ä»¬å½“ç„¶ä¸ä¼šé‚£ä¹ˆå‚»ä¹ä¹çš„ï¼Œç¬¬ä¸€æ—¶é—´å°±æ˜¯å»æ‰¾ "),t("strong",[s._v("ä¸­ä»‹")]),s._v(" å‘€ï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›äº†ç»Ÿä¸€æˆ¿æºçš„åœ°æ–¹ï¼Œæˆ‘ä»¬æ¶ˆè´¹è€…åªéœ€è¦è·‘åˆ°å®ƒé‚£é‡Œå»æ‰¾å°±è¡Œäº†ã€‚è€Œå¯¹äºæˆ¿ä¸œæ¥è¯´ï¼Œä»–ä»¬ä¹Ÿåªéœ€è¦æŠŠæˆ¿æºåœ¨ä¸­ä»‹é‚£é‡Œå‘å¸ƒå°±è¡Œäº†ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/4d161e2950414113834f2f0a8fc2c16c-new-imaged17347a0-e653-4830-9542-3d7ae4305b2b.png",alt:""}})]),s._v(" "),t("p",[s._v("é‚£ä¹ˆç°åœ¨ï¼Œæˆ‘ä»¬çš„æ¨¡å¼å°±æ˜¯è¿™æ ·çš„äº†ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/24382ce6bbd44932ac38b1accade12d1-new-image2ff8affc-6f1d-49de-a8c3-801e7bad2b11.png",alt:""}})]),s._v(" "),t("p",[s._v("ä½†æ˜¯ï¼Œè¿™ä¸ªæ—¶å€™è¿˜ä¼šå‡ºç°ä¸€äº›é—®é¢˜ã€‚")]),s._v(" "),t("ol",[t("li",[s._v("æˆ¿ä¸œæ³¨å†Œä¹‹åå¦‚æœä¸æƒ³å–æˆ¿å­äº†æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬æ˜¯ä¸æ˜¯éœ€è¦è®©æˆ¿ä¸œ "),t("strong",[s._v("å®šæœŸç»­çº¦")]),s._v(" ï¼Ÿå¦‚æœæˆ¿ä¸œä¸è¿›è¡Œç»­çº¦æ˜¯ä¸æ˜¯è¦å°†ä»–ä»¬ä»ä¸­ä»‹é‚£é‡Œçš„æ³¨å†Œåˆ—è¡¨ä¸­ "),t("strong",[s._v("ç§»é™¤")]),s._v(" ã€‚")]),s._v(" "),t("li",[s._v("ç§Ÿå®¢æ˜¯ä¸æ˜¯ä¹Ÿè¦è¿›è¡Œ "),t("strong",[s._v("æ³¨å†Œ")]),s._v(" å‘¢ï¼Ÿä¸ç„¶åˆåŒä¹™æ–¹æ€ä¹ˆæ¥å‘¢ï¼Ÿ")]),s._v(" "),t("li",[s._v("ä¸­ä»‹å¯ä¸å¯ä»¥åš "),t("strong",[s._v("è¿é”åº—")]),s._v(" å‘¢ï¼Ÿå¦‚æœè¿™ä¸€ä¸ªåº—å› ä¸ºæŸäº›ä¸å¯æŠ—åŠ›å› ç´ è€Œæ— æ³•ä½¿ç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ˜¯å¦å¯ä»¥æ¢ä¸€ä¸ªè¿é”åº—å‘¢ï¼Ÿ")])]),s._v(" "),t("p",[s._v("é’ˆå¯¹ä¸Šé¢çš„é—®é¢˜æˆ‘ä»¬æ¥é‡æ–°æ„å»ºä¸€ä¸‹ä¸Šé¢çš„æ¨¡å¼å›¾")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/%E7%A7%9F%E6%88%BF-%E4%B8%AD%E4%BB%8B%E6%A8%A1%E5%BC%8F%E5%9B%BE.jpg",alt:"ç§Ÿæˆ¿-ä¸­ä»‹æ¨¡å¼å›¾"}})]),s._v(" "),t("p",[s._v("å¥½äº†ï¼Œä¸¾å®Œè¿™ä¸ªğŸŒ°æˆ‘ä»¬å°±å¯ä»¥æ¥çœ‹å…³äº "),t("code",[s._v("Eureka")]),s._v(" çš„ä¸€äº›åŸºç¡€æ¦‚å¿µäº†ï¼Œä½ ä¼šå‘ç°è¿™ä¸œè¥¿ç†è§£èµ·æ¥æ€ä¹ˆè¿™ä¹ˆç®€å•ã€‚ğŸ‘ŠğŸ‘ŠğŸ‘Š")]),s._v(" "),t("p",[t("strong",[s._v("æœåŠ¡å‘ç°")]),s._v("ï¼šå…¶å®å°±æ˜¯ä¸€ä¸ªâ€œä¸­ä»‹â€ï¼Œæ•´ä¸ªè¿‡ç¨‹ä¸­æœ‰ä¸‰ä¸ªè§’è‰²ï¼š"),t("strong",[s._v("æœåŠ¡æä¾›è€…(å‡ºç§Ÿæˆ¿å­çš„)ã€æœåŠ¡æ¶ˆè´¹è€…(ç§Ÿå®¢)ã€æœåŠ¡ä¸­ä»‹(æˆ¿å±‹ä¸­ä»‹)")]),s._v("ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("æœåŠ¡æä¾›è€…")]),s._v("ï¼š å°±æ˜¯æä¾›ä¸€äº›è‡ªå·±èƒ½å¤Ÿæ‰§è¡Œçš„ä¸€äº›æœåŠ¡ç»™å¤–ç•Œã€‚")]),s._v(" "),t("p",[t("strong",[s._v("æœåŠ¡æ¶ˆè´¹è€…")]),s._v("ï¼š å°±æ˜¯éœ€è¦ä½¿ç”¨ä¸€äº›æœåŠ¡çš„â€œç”¨æˆ·â€ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("æœåŠ¡ä¸­ä»‹")]),s._v("ï¼š å…¶å®å°±æ˜¯æœåŠ¡æä¾›è€…å’ŒæœåŠ¡æ¶ˆè´¹è€…ä¹‹é—´çš„â€œæ¡¥æ¢â€ï¼ŒæœåŠ¡æä¾›è€…å¯ä»¥æŠŠè‡ªå·±æ³¨å†Œåˆ°æœåŠ¡ä¸­ä»‹é‚£é‡Œï¼Œè€ŒæœåŠ¡æ¶ˆè´¹è€…å¦‚éœ€è¦æ¶ˆè´¹ä¸€äº›æœåŠ¡(ä½¿ç”¨ä¸€äº›åŠŸèƒ½)å°±å¯ä»¥åœ¨æœåŠ¡ä¸­ä»‹ä¸­å¯»æ‰¾æ³¨å†Œåœ¨æœåŠ¡ä¸­ä»‹çš„æœåŠ¡æä¾›è€…ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("æœåŠ¡æ³¨å†Œ Register")]),s._v("ï¼š")]),s._v(" "),t("p",[s._v("å®˜æ–¹è§£é‡Šï¼šå½“ "),t("code",[s._v("Eureka")]),s._v(" å®¢æˆ·ç«¯å‘ "),t("code",[s._v("Eureka Server")]),s._v(" æ³¨å†Œæ—¶ï¼Œå®ƒæä¾›è‡ªèº«çš„"),t("strong",[s._v("å…ƒæ•°æ®")]),s._v("ï¼Œæ¯”å¦‚IPåœ°å€ã€ç«¯å£ï¼Œè¿è¡ŒçŠ¶å†µæŒ‡ç¤ºç¬¦URLï¼Œä¸»é¡µç­‰ã€‚")]),s._v(" "),t("p",[s._v("ç»“åˆä¸­ä»‹ç†è§£ï¼šæˆ¿ä¸œ (æä¾›è€… "),t("code",[s._v("Eureka Client Provider")]),s._v(")åœ¨ä¸­ä»‹ (æœåŠ¡å™¨ "),t("code",[s._v("Eureka Server")]),s._v(") é‚£é‡Œç™»è®°æˆ¿å±‹çš„ä¿¡æ¯ï¼Œæ¯”å¦‚é¢ç§¯ï¼Œä»·æ ¼ï¼Œåœ°æ®µç­‰ç­‰(å…ƒæ•°æ® "),t("code",[s._v("metaData")]),s._v(")ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("æœåŠ¡ç»­çº¦ Renew")]),s._v("ï¼š")]),s._v(" "),t("p",[s._v("å®˜æ–¹è§£é‡Šï¼š"),t("strong",[t("code",[s._v("Eureka")]),s._v(" å®¢æˆ·ä¼šæ¯éš”30ç§’(é»˜è®¤æƒ…å†µä¸‹)å‘é€ä¸€æ¬¡å¿ƒè·³æ¥ç»­çº¦")]),s._v("ã€‚ é€šè¿‡ç»­çº¦æ¥å‘ŠçŸ¥ "),t("code",[s._v("Eureka Server")]),s._v(" è¯¥ "),t("code",[s._v("Eureka")]),s._v(" å®¢æˆ·ä»ç„¶å­˜åœ¨ï¼Œæ²¡æœ‰å‡ºç°é—®é¢˜ã€‚ æ­£å¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœ "),t("code",[s._v("Eureka Server")]),s._v(" åœ¨90ç§’æ²¡æœ‰æ”¶åˆ° "),t("code",[s._v("Eureka")]),s._v(" å®¢æˆ·çš„ç»­çº¦ï¼Œå®ƒä¼šå°†å®ä¾‹ä»å…¶æ³¨å†Œè¡¨ä¸­åˆ é™¤ã€‚")]),s._v(" "),t("p",[s._v("ç»“åˆä¸­ä»‹ç†è§£ï¼šæˆ¿ä¸œ (æä¾›è€… "),t("code",[s._v("Eureka Client Provider")]),s._v(") å®šæœŸå‘Šè¯‰ä¸­ä»‹ (æœåŠ¡å™¨ "),t("code",[s._v("Eureka Server")]),s._v(") æˆ‘çš„æˆ¿å­è¿˜ç§Ÿ(ç»­çº¦) ï¼Œä¸­ä»‹ (æœåŠ¡å™¨"),t("code",[s._v("Eureka Server")]),s._v(") æ”¶åˆ°ä¹‹åç»§ç»­ä¿ç•™æˆ¿å±‹çš„ä¿¡æ¯ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("è·å–æ³¨å†Œåˆ—è¡¨ä¿¡æ¯ Fetch Registries")]),s._v("ï¼š")]),s._v(" "),t("p",[s._v("å®˜æ–¹è§£é‡Šï¼š"),t("code",[s._v("Eureka")]),s._v(" å®¢æˆ·ç«¯ä»æœåŠ¡å™¨è·å–æ³¨å†Œè¡¨ä¿¡æ¯ï¼Œå¹¶å°†å…¶ç¼“å­˜åœ¨æœ¬åœ°ã€‚å®¢æˆ·ç«¯ä¼šä½¿ç”¨è¯¥ä¿¡æ¯æŸ¥æ‰¾å…¶ä»–æœåŠ¡ï¼Œä»è€Œè¿›è¡Œè¿œç¨‹è°ƒç”¨ã€‚è¯¥æ³¨å†Œåˆ—è¡¨ä¿¡æ¯å®šæœŸï¼ˆæ¯30ç§’é’Ÿï¼‰æ›´æ–°ä¸€æ¬¡ã€‚æ¯æ¬¡è¿”å›æ³¨å†Œåˆ—è¡¨ä¿¡æ¯å¯èƒ½ä¸ "),t("code",[s._v("Eureka")]),s._v(" å®¢æˆ·ç«¯çš„ç¼“å­˜ä¿¡æ¯ä¸åŒ, "),t("code",[s._v("Eureka")]),s._v(" å®¢æˆ·ç«¯è‡ªåŠ¨å¤„ç†ã€‚å¦‚æœç”±äºæŸç§åŸå› å¯¼è‡´æ³¨å†Œåˆ—è¡¨ä¿¡æ¯ä¸èƒ½åŠæ—¶åŒ¹é…ï¼Œ"),t("code",[s._v("Eureka")]),s._v(" å®¢æˆ·ç«¯åˆ™ä¼šé‡æ–°è·å–æ•´ä¸ªæ³¨å†Œè¡¨ä¿¡æ¯ã€‚ "),t("code",[s._v("Eureka")]),s._v(" æœåŠ¡å™¨ç¼“å­˜æ³¨å†Œåˆ—è¡¨ä¿¡æ¯ï¼Œæ•´ä¸ªæ³¨å†Œè¡¨ä»¥åŠæ¯ä¸ªåº”ç”¨ç¨‹åºçš„ä¿¡æ¯è¿›è¡Œäº†å‹ç¼©ï¼Œå‹ç¼©å†…å®¹å’Œæ²¡æœ‰å‹ç¼©çš„å†…å®¹å®Œå…¨ç›¸åŒã€‚"),t("code",[s._v("Eureka")]),s._v(" å®¢æˆ·ç«¯å’Œ "),t("code",[s._v("Eureka")]),s._v(" æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨JSON / XMLæ ¼å¼è¿›è¡Œé€šè®¯ã€‚åœ¨é»˜è®¤çš„æƒ…å†µä¸‹ "),t("code",[s._v("Eureka")]),s._v(" å®¢æˆ·ç«¯ä½¿ç”¨å‹ç¼© "),t("code",[s._v("JSON")]),s._v(" æ ¼å¼æ¥è·å–æ³¨å†Œåˆ—è¡¨çš„ä¿¡æ¯ã€‚")]),s._v(" "),t("p",[s._v("ç»“åˆä¸­ä»‹ç†è§£ï¼šç§Ÿå®¢(æ¶ˆè´¹è€… "),t("code",[s._v("Eureka Client Consumer")]),s._v(") å»ä¸­ä»‹ (æœåŠ¡å™¨ "),t("code",[s._v("Eureka Server")]),s._v(") é‚£é‡Œè·å–æ‰€æœ‰çš„æˆ¿å±‹ä¿¡æ¯åˆ—è¡¨ (å®¢æˆ·ç«¯åˆ—è¡¨ "),t("code",[s._v("Eureka Client List")]),s._v(") ï¼Œè€Œä¸”ç§Ÿå®¢ä¸ºäº†è·å–æœ€æ–°çš„ä¿¡æ¯ä¼šå®šæœŸå‘ä¸­ä»‹ (æœåŠ¡å™¨ "),t("code",[s._v("Eureka Server")]),s._v(") é‚£é‡Œè·å–å¹¶æ›´æ–°æœ¬åœ°åˆ—è¡¨ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("æœåŠ¡ä¸‹çº¿ Cancel")]),s._v("ï¼š")]),s._v(" "),t("p",[s._v("å®˜æ–¹è§£é‡Šï¼šEurekaå®¢æˆ·ç«¯åœ¨ç¨‹åºå…³é—­æ—¶å‘EurekaæœåŠ¡å™¨å‘é€å–æ¶ˆè¯·æ±‚ã€‚ å‘é€è¯·æ±‚åï¼Œè¯¥å®¢æˆ·ç«¯å®ä¾‹ä¿¡æ¯å°†ä»æœåŠ¡å™¨çš„å®ä¾‹æ³¨å†Œè¡¨ä¸­åˆ é™¤ã€‚è¯¥ä¸‹çº¿è¯·æ±‚ä¸ä¼šè‡ªåŠ¨å®Œæˆï¼Œå®ƒéœ€è¦è°ƒç”¨ä»¥ä¸‹å†…å®¹ï¼š"),t("code",[s._v("DiscoveryManager.getInstance().shutdownComponent();")])]),s._v(" "),t("p",[s._v("ç»“åˆä¸­ä»‹ç†è§£ï¼šæˆ¿ä¸œ (æä¾›è€… "),t("code",[s._v("Eureka Client Provider")]),s._v(") å‘Šè¯‰ä¸­ä»‹  (æœåŠ¡å™¨ "),t("code",[s._v("Eureka Server")]),s._v(") æˆ‘çš„æˆ¿å­ä¸ç§Ÿäº†ï¼Œä¸­ä»‹ä¹‹åå°±å°†æ³¨å†Œçš„æˆ¿å±‹ä¿¡æ¯ä»åˆ—è¡¨ä¸­å‰”é™¤ã€‚")]),s._v(" "),t("p",[t("strong",[s._v("æœåŠ¡å‰”é™¤ Eviction")]),s._v("ï¼š")]),s._v(" "),t("p",[s._v("å®˜æ–¹è§£é‡Šï¼šåœ¨é»˜è®¤çš„æƒ…å†µä¸‹ï¼Œ"),t("strong",[s._v("å½“Eurekaå®¢æˆ·ç«¯è¿ç»­90ç§’(3ä¸ªç»­çº¦å‘¨æœŸ)æ²¡æœ‰å‘EurekaæœåŠ¡å™¨å‘é€æœåŠ¡ç»­çº¦ï¼Œå³å¿ƒè·³ï¼ŒEurekaæœåŠ¡å™¨ä¼šå°†è¯¥æœåŠ¡å®ä¾‹ä»æœåŠ¡æ³¨å†Œåˆ—è¡¨åˆ é™¤")]),s._v("ï¼Œå³æœåŠ¡å‰”é™¤ã€‚")]),s._v(" "),t("p",[s._v("ç»“åˆä¸­ä»‹ç†è§£ï¼šæˆ¿ä¸œ(æä¾›è€… "),t("code",[s._v("Eureka Client Provider")]),s._v(") ä¼šå®šæœŸè”ç³» ä¸­ä»‹  (æœåŠ¡å™¨ "),t("code",[s._v("Eureka Server")]),s._v(") å‘Šè¯‰ä»–æˆ‘çš„æˆ¿å­è¿˜ç§Ÿ(ç»­çº¦)ï¼Œå¦‚æœä¸­ä»‹  (æœåŠ¡å™¨ "),t("code",[s._v("Eureka Server")]),s._v(") é•¿æ—¶é—´æ²¡æ”¶åˆ°æä¾›è€…çš„ä¿¡æ¯ï¼Œé‚£ä¹ˆä¸­ä»‹ä¼šå°†ä»–çš„æˆ¿å±‹ä¿¡æ¯ç»™ä¸‹æ¶(æœåŠ¡å‰”é™¤)ã€‚")]),s._v(" "),t("p",[s._v("ä¸‹é¢å°±æ˜¯ "),t("code",[s._v("Netflix")]),s._v(" å®˜æ–¹ç»™å‡ºçš„ "),t("code",[s._v("Eureka")]),s._v(" æ¶æ„å›¾ï¼Œä½ ä¼šå‘ç°å’Œæˆ‘ä»¬å‰é¢ç”»çš„ä¸­ä»‹å›¾åˆ«æ— äºŒè‡´ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/5d723c49eca1468ab7b89af06743023c-new-imageb8aa3d41-fad4-4b38-add9-c304930ab285.png",alt:"Eurekaæ¶æ„å›¾"}})]),s._v(" "),t("p",[s._v("å½“ç„¶ï¼Œå¯ä»¥å……å½“æœåŠ¡å‘ç°çš„ç»„ä»¶æœ‰å¾ˆå¤šï¼š"),t("code",[s._v("Zookeeper")]),s._v(" ï¼Œ"),t("code",[s._v("Consul")]),s._v(" ï¼Œ "),t("code",[s._v("Eureka")]),s._v(" ç­‰ã€‚")]),s._v(" "),t("p",[s._v("æ›´å¤šå…³äº "),t("code",[s._v("Eureka")]),s._v(" çš„çŸ¥è¯†(è‡ªæˆ‘ä¿æŠ¤ï¼Œåˆå§‹æ³¨å†Œç­–ç•¥ç­‰ç­‰)å¯ä»¥è‡ªå·±å»å®˜ç½‘æŸ¥çœ‹ï¼Œæˆ–è€…æŸ¥çœ‹æˆ‘çš„å¦ä¸€ç¯‡æ–‡ç«  "),t("a",{attrs:{href:"https://juejin.im/post/5dd497e3f265da0ba7718018",target:"_blank",rel:"noopener noreferrer"}},[s._v("æ·±å…¥ç†è§£ Eureka"),t("OutboundLink")],1),s._v("ã€‚")]),s._v(" "),t("h2",{attrs:{id:"è´Ÿè½½å‡è¡¡ä¹‹-ribbon"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è´Ÿè½½å‡è¡¡ä¹‹-ribbon"}},[s._v("#")]),s._v(" è´Ÿè½½å‡è¡¡ä¹‹ Ribbon")]),s._v(" "),t("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯-resttemplate"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯-resttemplate"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯ "),t("code",[s._v("RestTemplate")]),s._v("?")]),s._v(" "),t("p",[s._v("ä¸æ˜¯è®² "),t("code",[s._v("Ribbon")]),s._v(" ä¹ˆï¼Ÿæ€ä¹ˆæ‰¯åˆ°äº† "),t("code",[s._v("RestTemplate")]),s._v(" äº†ï¼Ÿä½ å…ˆåˆ«æ€¥ï¼Œå¬æˆ‘æ…¢æ…¢é“æ¥ã€‚")]),s._v(" "),t("p",[s._v("æˆ‘ä¸å¬æˆ‘ä¸å¬æˆ‘ä¸å¬ğŸ™‰ğŸ™‰ğŸ™‰ã€‚")]),s._v(" "),t("p",[s._v("æˆ‘å°±è¯´ä¸€å¥ï¼"),t("strong",[t("code",[s._v("RestTemplate")]),s._v("æ˜¯"),t("code",[s._v("Spring")]),s._v("æä¾›çš„ä¸€ä¸ªè®¿é—®HttpæœåŠ¡çš„å®¢æˆ·ç«¯ç±»")]),s._v("ï¼Œæ€ä¹ˆè¯´å‘¢ï¼Ÿå°±æ˜¯å¾®æœåŠ¡ä¹‹é—´çš„è°ƒç”¨æ˜¯ä½¿ç”¨çš„ "),t("code",[s._v("RestTemplate")]),s._v(" ã€‚æ¯”å¦‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ æ¶ˆè´¹è€…B éœ€è¦è°ƒç”¨ æä¾›è€…A æ‰€æä¾›çš„æœåŠ¡æˆ‘ä»¬å°±éœ€è¦è¿™ä¹ˆå†™ã€‚å¦‚æˆ‘ä¸‹é¢çš„ä¼ªä»£ç ã€‚")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestTemplate")]),s._v(" restTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿™é‡Œæ˜¯æä¾›è€…Açš„ipåœ°å€ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨äº† Eureka é‚£ä¹ˆå°±åº”è¯¥æ˜¯æä¾›è€…Açš„åç§°")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SERVICE_PROVIDER_A")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://localhost:8081"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PostMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/judge"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("judge")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestBody")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Request")]),s._v(" request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" url "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SERVICE_PROVIDER_A")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/service1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" restTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("postForObject")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Boolean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("å¦‚æœä½ å¯¹æºç æ„Ÿå…´è¶£çš„è¯ï¼Œä½ ä¼šå‘ç°ä¸Šé¢æˆ‘ä»¬æ‰€è®²çš„ "),t("code",[s._v("Eureka")]),s._v(" æ¡†æ¶ä¸­çš„ "),t("strong",[s._v("æ³¨å†Œ")]),s._v("ã€"),t("strong",[s._v("ç»­çº¦")]),s._v(" ç­‰ï¼Œåº•å±‚éƒ½æ˜¯ä½¿ç”¨çš„ "),t("code",[s._v("RestTemplate")]),s._v(" ã€‚")]),s._v(" "),t("h3",{attrs:{id:"ä¸ºä»€ä¹ˆéœ€è¦-ribbon"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆéœ€è¦-ribbon"}},[s._v("#")]),s._v(" ä¸ºä»€ä¹ˆéœ€è¦ Ribbonï¼Ÿ")]),s._v(" "),t("p",[t("code",[s._v("Ribbon")]),s._v("  æ˜¯ "),t("code",[s._v("Netflix")]),s._v(" å…¬å¸çš„ä¸€ä¸ªå¼€æºçš„è´Ÿè½½å‡è¡¡ é¡¹ç›®ï¼Œæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯/è¿›ç¨‹å†…è´Ÿè½½å‡è¡¡å™¨ï¼Œ"),t("strong",[s._v("è¿è¡Œåœ¨æ¶ˆè´¹è€…ç«¯")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("æˆ‘ä»¬å†ä¸¾ä¸ªğŸŒ°ï¼Œæ¯”å¦‚æˆ‘ä»¬è®¾è®¡äº†ä¸€ä¸ªç§’æ€ç³»ç»Ÿï¼Œä½†æ˜¯ä¸ºäº†æ•´ä¸ªç³»ç»Ÿçš„ "),t("strong",[s._v("é«˜å¯ç”¨")]),s._v(" ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿™ä¸ªç³»ç»Ÿåšä¸€ä¸ªé›†ç¾¤ï¼Œè€Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ¶ˆè´¹è€…å°±å¯ä»¥æ‹¥æœ‰å¤šä¸ªç§’æ€ç³»ç»Ÿçš„è°ƒç”¨é€”å¾„äº†ï¼Œå¦‚ä¸‹å›¾ã€‚")]),s._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/ç§’æ€ç³»ç»Ÿ-ribbon.jpg"}}),s._v(" "),t("p",[s._v("å¦‚æœè¿™ä¸ªæ—¶å€™æˆ‘ä»¬æ²¡æœ‰è¿›è¡Œä¸€äº› "),t("strong",[s._v("å‡è¡¡æ“ä½œ")]),s._v(" ï¼Œå¦‚æœæˆ‘ä»¬å¯¹ "),t("code",[s._v("ç§’æ€ç³»ç»Ÿ1")]),s._v(" è¿›è¡Œå¤§é‡çš„è°ƒç”¨ï¼Œè€Œå¦å¤–ä¸¤ä¸ªåŸºæœ¬ä¸è¯·æ±‚ï¼Œå°±ä¼šå¯¼è‡´ "),t("code",[s._v("ç§’æ€ç³»ç»Ÿ1")]),s._v(" å´©æºƒï¼Œè€Œå¦å¤–ä¸¤ä¸ªå°±å˜æˆäº†å‚€å„¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦åšé›†ç¾¤ï¼Œæˆ‘ä»¬é«˜å¯ç”¨ä½“ç°çš„æ„ä¹‰åˆåœ¨å“ªå‘¢ï¼Ÿ")]),s._v(" "),t("p",[s._v("æ‰€ä»¥ "),t("code",[s._v("Ribbon")]),s._v(" å‡ºç°äº†ï¼Œæ³¨æ„æˆ‘ä»¬ä¸Šé¢åŠ ç²—çš„å‡ ä¸ªå­—â€”â€”"),t("strong",[s._v("è¿è¡Œåœ¨æ¶ˆè´¹è€…ç«¯")]),s._v("ã€‚æŒ‡çš„æ˜¯ï¼Œ"),t("code",[s._v("Ribbon")]),s._v(" æ˜¯è¿è¡Œåœ¨æ¶ˆè´¹è€…ç«¯çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œå¦‚ä¸‹å›¾ã€‚")]),s._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/ç§’æ€ç³»ç»Ÿ-ribbon2.jpg"}}),s._v(" "),t("p",[s._v("å…¶å·¥ä½œåŸç†å°±æ˜¯ "),t("code",[s._v("Consumer")]),s._v(" ç«¯è·å–åˆ°äº†æ‰€æœ‰çš„æœåŠ¡åˆ—è¡¨ä¹‹åï¼Œåœ¨å…¶"),t("strong",[s._v("å†…éƒ¨")]),s._v("ä½¿ç”¨"),t("strong",[s._v("è´Ÿè½½å‡è¡¡ç®—æ³•")]),s._v("ï¼Œè¿›è¡Œå¯¹å¤šä¸ªç³»ç»Ÿçš„è°ƒç”¨ã€‚")]),s._v(" "),t("h3",{attrs:{id:"nginx-å’Œ-ribbon-çš„å¯¹æ¯”"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#nginx-å’Œ-ribbon-çš„å¯¹æ¯”"}},[s._v("#")]),s._v(" Nginx å’Œ Ribbon çš„å¯¹æ¯”")]),s._v(" "),t("p",[s._v("æåˆ° "),t("strong",[s._v("è´Ÿè½½å‡è¡¡")]),s._v(" å°±ä¸å¾—ä¸æåˆ°å¤§åé¼é¼çš„ "),t("code",[s._v("Nignx")]),s._v(" äº†ï¼Œè€Œå’Œ "),t("code",[s._v("Ribbon")]),s._v(" ä¸åŒçš„æ˜¯ï¼Œå®ƒæ˜¯ä¸€ç§"),t("strong",[s._v("é›†ä¸­å¼")]),s._v("çš„è´Ÿè½½å‡è¡¡å™¨ã€‚")]),s._v(" "),t("p",[s._v("ä½•ä¸ºé›†ä¸­å¼å‘¢ï¼Ÿç®€å•ç†è§£å°±æ˜¯ "),t("strong",[s._v("å°†æ‰€æœ‰è¯·æ±‚éƒ½é›†ä¸­èµ·æ¥ï¼Œç„¶åå†è¿›è¡Œè´Ÿè½½å‡è¡¡")]),s._v("ã€‚å¦‚ä¸‹å›¾ã€‚")]),s._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/nginx-vs-ribbon1.jpg"}}),s._v(" "),t("p",[s._v("æˆ‘ä»¬å¯ä»¥çœ‹åˆ° "),t("code",[s._v("Nginx")]),s._v(" æ˜¯æ¥æ”¶äº†æ‰€æœ‰çš„è¯·æ±‚è¿›è¡Œè´Ÿè½½å‡è¡¡çš„ï¼Œè€Œå¯¹äº "),t("code",[s._v("Ribbon")]),s._v(" æ¥è¯´å®ƒæ˜¯åœ¨æ¶ˆè´¹è€…ç«¯è¿›è¡Œçš„è´Ÿè½½å‡è¡¡ã€‚å¦‚ä¸‹å›¾ã€‚")]),s._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/nginx-vs-ribbon2.jpg"}}),s._v(" "),t("blockquote",[t("p",[s._v("è¯·æ³¨æ„ "),t("code",[s._v("Request")]),s._v(" çš„ä½ç½®ï¼Œåœ¨ "),t("code",[s._v("Nginx")]),s._v(" ä¸­è¯·æ±‚æ˜¯å…ˆè¿›å…¥è´Ÿè½½å‡è¡¡å™¨ï¼Œè€Œåœ¨ "),t("code",[s._v("Ribbon")]),s._v(" ä¸­æ˜¯å…ˆåœ¨å®¢æˆ·ç«¯è¿›è¡Œè´Ÿè½½å‡è¡¡æ‰è¿›è¡Œè¯·æ±‚çš„ã€‚")])]),s._v(" "),t("h3",{attrs:{id:"ribbon-çš„å‡ ç§è´Ÿè½½å‡è¡¡ç®—æ³•"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ribbon-çš„å‡ ç§è´Ÿè½½å‡è¡¡ç®—æ³•"}},[s._v("#")]),s._v(" Ribbon çš„å‡ ç§è´Ÿè½½å‡è¡¡ç®—æ³•")]),s._v(" "),t("p",[s._v("è´Ÿè½½å‡è¡¡ï¼Œä¸ç®¡ "),t("code",[s._v("Nginx")]),s._v(" è¿˜æ˜¯ "),t("code",[s._v("Ribbon")]),s._v(" éƒ½éœ€è¦å…¶ç®—æ³•çš„æ”¯æŒï¼Œå¦‚æœæˆ‘æ²¡è®°é”™çš„è¯ "),t("code",[s._v("Nginx")]),s._v(" ä½¿ç”¨çš„æ˜¯ è½®è¯¢å’ŒåŠ æƒè½®è¯¢ç®—æ³•ã€‚è€Œåœ¨ "),t("code",[s._v("Ribbon")]),s._v(" ä¸­æœ‰æ›´å¤šçš„è´Ÿè½½å‡è¡¡è°ƒåº¦ç®—æ³•ï¼Œå…¶é»˜è®¤æ˜¯ä½¿ç”¨çš„ "),t("code",[s._v("RoundRobinRule")]),s._v(" è½®è¯¢ç­–ç•¥ã€‚")]),s._v(" "),t("ul",[t("li",[t("strong",[t("code",[s._v("RoundRobinRule")])]),s._v("ï¼šè½®è¯¢ç­–ç•¥ã€‚"),t("code",[s._v("Ribbon")]),s._v(" é»˜è®¤é‡‡ç”¨çš„ç­–ç•¥ã€‚è‹¥ç»è¿‡ä¸€è½®è½®è¯¢æ²¡æœ‰æ‰¾åˆ°å¯ç”¨çš„ "),t("code",[s._v("provider")]),s._v("ï¼Œå…¶æœ€å¤šè½®è¯¢ 10 è½®ã€‚è‹¥æœ€ç»ˆè¿˜æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™è¿”å› "),t("code",[s._v("null")]),s._v("ã€‚")]),s._v(" "),t("li",[t("strong",[t("code",[s._v("RandomRule")])]),s._v(": éšæœºç­–ç•¥ï¼Œä»æ‰€æœ‰å¯ç”¨çš„ "),t("code",[s._v("provider")]),s._v(" ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªã€‚")]),s._v(" "),t("li",[t("strong",[t("code",[s._v("RetryRule")])]),s._v(": é‡è¯•ç­–ç•¥ã€‚å…ˆæŒ‰ç…§ "),t("code",[s._v("RoundRobinRule")]),s._v(" ç­–ç•¥è·å– "),t("code",[s._v("provider")]),s._v("ï¼Œè‹¥è·å–å¤±è´¥ï¼Œåˆ™åœ¨æŒ‡å®šçš„æ—¶é™å†…é‡è¯•ã€‚é»˜è®¤çš„æ—¶é™ä¸º 500 æ¯«ç§’ã€‚")])]),s._v(" "),t("p",[s._v("ğŸ¦ğŸ¦ğŸ¦ è¿˜æœ‰å¾ˆå¤šï¼Œè¿™é‡Œä¸ä¸€ä¸€ä¸¾ğŸŒ°äº†ï¼Œä½ æœ€éœ€è¦çŸ¥é“çš„æ˜¯é»˜è®¤è½®è¯¢ç®—æ³•ï¼Œå¹¶ä¸”å¯ä»¥æ›´æ¢é»˜è®¤çš„è´Ÿè½½å‡è¡¡ç®—æ³•ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­åšå‡ºä¿®æ”¹å°±è¡Œã€‚")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("providerName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ribbon")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("NFLoadBalancerRuleClassName")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" com.netflix.loadbalancer.RandomRule\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("å½“ç„¶ï¼Œåœ¨ "),t("code",[s._v("Ribbon")]),s._v(" ä¸­ä½ è¿˜å¯ä»¥"),t("strong",[s._v("è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡ç®—æ³•")]),s._v("ï¼Œä½ åªéœ€è¦å®ç° "),t("code",[s._v("IRule")]),s._v(" æ¥å£ï¼Œç„¶åä¿®æ”¹é…ç½®æ–‡ä»¶æˆ–è€…è‡ªå®šä¹‰ "),t("code",[s._v("Java Config")]),s._v(" ç±»ã€‚")]),s._v(" "),t("h2",{attrs:{id:"ä»€ä¹ˆæ˜¯-open-feign"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯-open-feign"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯ Open Feign")]),s._v(" "),t("p",[s._v("æœ‰äº† "),t("code",[s._v("Eureka")]),s._v("  ï¼Œ"),t("code",[s._v("RestTemplate")]),s._v(" ï¼Œ"),t("code",[s._v("Ribbon")]),s._v("ï¼Œ  æˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«åœ°è¿›è¡ŒæœåŠ¡é—´çš„è°ƒç”¨äº†ï¼Œä½†æ˜¯ä½¿ç”¨ "),t("code",[s._v("RestTemplate")]),s._v(" è¿˜æ˜¯ä¸æ–¹ä¾¿ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½è¦è¿›è¡Œè¿™æ ·çš„è°ƒç”¨ã€‚")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestTemplate")]),s._v(" restTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿™é‡Œæ˜¯æä¾›è€…Açš„ipåœ°å€ï¼Œä½†æ˜¯å¦‚æœä½¿ç”¨äº† Eureka é‚£ä¹ˆå°±åº”è¯¥æ˜¯æä¾›è€…Açš„åç§°")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SERVICE_PROVIDER_A")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://localhost:8081"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PostMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/judge"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("judge")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestBody")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Request")]),s._v(" request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" url "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SERVICE_PROVIDER_A")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/service1"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ˜¯ä¸æ˜¯å¤ªéº»çƒ¦äº†ï¼Ÿï¼Ÿï¼Ÿæ¯æ¬¡éƒ½è¦ urlã€è¯·æ±‚ã€è¿”å›ç±»å‹çš„ ")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" restTemplate"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("postForObject")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("url"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Boolean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[s._v("è¿™æ ·æ¯æ¬¡éƒ½è°ƒç”¨ "),t("code",[s._v("RestRemplate")]),s._v(" çš„ "),t("code",[s._v("API")]),s._v(" æ˜¯å¦å¤ªéº»çƒ¦ï¼Œæˆ‘èƒ½ä¸èƒ½åƒ"),t("strong",[s._v("è°ƒç”¨åŸæ¥ä»£ç ä¸€æ ·è¿›è¡Œå„ä¸ªæœåŠ¡é—´çš„è°ƒç”¨å‘¢ï¼Ÿ")])]),s._v(" "),t("p",[s._v("ğŸ’¡ğŸ’¡ğŸ’¡èªæ˜çš„å°æœ‹å‹è‚¯å®šæƒ³åˆ°äº†ï¼Œé‚£å°±ç”¨ "),t("strong",[s._v("æ˜ å°„")]),s._v(" å‘€ï¼Œå°±åƒåŸŸåå’ŒIPåœ°å€çš„æ˜ å°„ã€‚æˆ‘ä»¬å¯ä»¥å°†è¢«è°ƒç”¨çš„æœåŠ¡ä»£ç æ˜ å°„åˆ°æ¶ˆè´¹è€…ç«¯ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ **â€œæ— ç¼å¼€å‘â€ **å•¦ã€‚")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("OpenFeign")]),s._v(" ä¹Ÿæ˜¯è¿è¡Œåœ¨æ¶ˆè´¹è€…ç«¯çš„ï¼Œä½¿ç”¨ "),t("code",[s._v("Ribbon")]),s._v(" è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œæ‰€ä»¥ "),t("code",[s._v("OpenFeign")]),s._v(" ç›´æ¥å†…ç½®äº† "),t("code",[s._v("Ribbon")]),s._v("ã€‚")])]),s._v(" "),t("p",[s._v("åœ¨å¯¼å…¥äº† "),t("code",[s._v("Open Feign")]),s._v(" ä¹‹åæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œæ„‰å¿«ç¼–å†™  "),t("code",[s._v("Consumer")]),s._v(" ç«¯ä»£ç äº†ã€‚")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä½¿ç”¨ @FeignClient æ³¨è§£æ¥æŒ‡å®šæä¾›è€…çš„åå­—")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@FeignClient")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("value "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"eureka-client-provider"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TestClient")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿™é‡Œä¸€å®šè¦æ³¨æ„éœ€è¦ä½¿ç”¨çš„æ˜¯æä¾›è€…é‚£ç«¯çš„è¯·æ±‚ç›¸å¯¹è·¯å¾„ï¼Œè¿™é‡Œå°±ç›¸å½“äºæ˜ å°„äº†")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("value "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/provider/xxx"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    method "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestMethod")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("POST")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CommonResponse")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Plan")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPlans")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestBody")]),s._v(" planGetRequest request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("ç„¶åæˆ‘ä»¬åœ¨ "),t("code",[s._v("Controller")]),s._v(" å°±å¯ä»¥åƒåŸæ¥è°ƒç”¨ "),t("code",[s._v("Service")]),s._v(" å±‚ä»£ç ä¸€æ ·è°ƒç”¨å®ƒäº†ã€‚")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RestController")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TestController")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿™é‡Œå°±ç›¸å½“äºåŸæ¥è‡ªåŠ¨æ³¨å…¥çš„ Service")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Autowired")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TestClient")]),s._v(" testClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// controller è°ƒç”¨ service å±‚ä»£ç ")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("value "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" method "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestMethod")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("POST")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CommonResponse")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Plan")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestBody")]),s._v(" planGetRequest request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" testClient"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getPlans")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h2",{attrs:{id:"å¿…ä¸å¯å°‘çš„-hystrix"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¿…ä¸å¯å°‘çš„-hystrix"}},[s._v("#")]),s._v(" å¿…ä¸å¯å°‘çš„ Hystrix")]),s._v(" "),t("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯-hystrixä¹‹ç†”æ–­å’Œé™çº§"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯-hystrixä¹‹ç†”æ–­å’Œé™çº§"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯ Hystrixä¹‹ç†”æ–­å’Œé™çº§")]),s._v(" "),t("blockquote",[t("p",[s._v("åœ¨åˆ†å¸ƒå¼ç¯å¢ƒä¸­ï¼Œä¸å¯é¿å…åœ°ä¼šæœ‰è®¸å¤šæœåŠ¡ä¾èµ–é¡¹ä¸­çš„æŸäº›å¤±è´¥ã€‚Hystrixæ˜¯ä¸€ä¸ªåº“ï¼Œå¯é€šè¿‡æ·»åŠ ç­‰å¾…æ—¶é—´å®¹é™å’Œå®¹é”™é€»è¾‘æ¥å¸®åŠ©æ‚¨æ§åˆ¶è¿™äº›åˆ†å¸ƒå¼æœåŠ¡ä¹‹é—´çš„äº¤äº’ã€‚Hystrixé€šè¿‡éš”ç¦»æœåŠ¡ä¹‹é—´çš„è®¿é—®ç‚¹ï¼Œåœæ­¢æœåŠ¡ä¹‹é—´çš„çº§è”æ•…éšœå¹¶æä¾›åå¤‡é€‰é¡¹æ¥å®ç°æ­¤ç›®çš„ï¼Œæ‰€æœ‰è¿™äº›éƒ½å¯ä»¥æé«˜ç³»ç»Ÿçš„æ•´ä½“å¼¹æ€§ã€‚")])]),s._v(" "),t("p",[s._v("æ€»ä½“æ¥è¯´ "),t("code",[s._v("Hystrix")]),s._v(" å°±æ˜¯ä¸€ä¸ªèƒ½è¿›è¡Œ "),t("strong",[s._v("ç†”æ–­")]),s._v(" å’Œ "),t("strong",[s._v("é™çº§")]),s._v(" çš„åº“ï¼Œé€šè¿‡ä½¿ç”¨å®ƒèƒ½æé«˜æ•´ä¸ªç³»ç»Ÿçš„å¼¹æ€§ã€‚")]),s._v(" "),t("p",[s._v("é‚£ä¹ˆä»€ä¹ˆæ˜¯ ç†”æ–­å’Œé™çº§ å‘¢ï¼Ÿå†ä¸¾ä¸ªğŸŒ°ï¼Œæ­¤æ—¶æˆ‘ä»¬æ•´ä¸ªå¾®æœåŠ¡ç³»ç»Ÿæ˜¯è¿™æ ·çš„ã€‚æœåŠ¡Aè°ƒç”¨äº†æœåŠ¡Bï¼ŒæœåŠ¡Bå†è°ƒç”¨äº†æœåŠ¡Cï¼Œä½†æ˜¯å› ä¸ºæŸäº›åŸå› ï¼ŒæœåŠ¡Cé¡¶ä¸ä½äº†ï¼Œè¿™ä¸ªæ—¶å€™å¤§é‡è¯·æ±‚ä¼šåœ¨æœåŠ¡Cé˜»å¡ã€‚")]),s._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/Hystrix1.jpg"}}),s._v(" "),t("p",[s._v("æœåŠ¡Cé˜»å¡äº†è¿˜å¥½ï¼Œæ¯•ç«Ÿåªæ˜¯ä¸€ä¸ªç³»ç»Ÿå´©æºƒäº†ã€‚ä½†æ˜¯è¯·æ³¨æ„è¿™ä¸ªæ—¶å€™å› ä¸ºæœåŠ¡Cä¸èƒ½è¿”å›å“åº”ï¼Œé‚£ä¹ˆæœåŠ¡Bè°ƒç”¨æœåŠ¡Cçš„çš„è¯·æ±‚å°±ä¼šé˜»å¡ï¼ŒåŒç†æœåŠ¡Bé˜»å¡äº†ï¼Œé‚£ä¹ˆæœåŠ¡Aä¹Ÿä¼šé˜»å¡å´©æºƒã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("è¯·æ³¨æ„ï¼Œä¸ºä»€ä¹ˆé˜»å¡ä¼šå´©æºƒã€‚å› ä¸ºè¿™äº›è¯·æ±‚ä¼šæ¶ˆè€—å ç”¨ç³»ç»Ÿçš„çº¿ç¨‹ã€IO ç­‰èµ„æºï¼Œæ¶ˆè€—å®Œä½ è¿™ä¸ªç³»ç»ŸæœåŠ¡å™¨ä¸å°±å´©äº†ä¹ˆã€‚")])]),s._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/Hystrix2.jpg"}}),s._v(" "),t("p",[s._v("è¿™å°±å« "),t("strong",[s._v("æœåŠ¡é›ªå´©")]),s._v("ã€‚å¦ˆè€¶ï¼Œä¸Šé¢ä¸¤ä¸ª "),t("strong",[s._v("ç†”æ–­")]),s._v(" å’Œ "),t("strong",[s._v("é™çº§")]),s._v(" ä½ éƒ½æ²¡ç»™æˆ‘è§£é‡Šæ¸…æ¥šï¼Œä½ ç°åœ¨åˆç»™æˆ‘æ‰¯ä»€ä¹ˆ "),t("strong",[s._v("æœåŠ¡é›ªå´©")]),s._v(" ï¼ŸğŸ˜«ğŸ˜«ğŸ˜«")]),s._v(" "),t("p",[s._v("åˆ«æ€¥ï¼Œå¬æˆ‘æ…¢æ…¢é“æ¥ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/513d7e7f6d574fd799195d05556f4aa7-new-image9265b6bd-41ca-4e62-86f3-4341e5bdbe6c.png",alt:""}})]),s._v(" "),t("p",[s._v("ä¸å¬æˆ‘ä¹Ÿå¾—è®²ä¸‹å»ï¼")]),s._v(" "),t("p",[s._v("æ‰€è°“ "),t("strong",[s._v("ç†”æ–­")]),s._v(" å°±æ˜¯æœåŠ¡é›ªå´©çš„ä¸€ç§æœ‰æ•ˆè§£å†³æ–¹æ¡ˆã€‚å½“æŒ‡å®šæ—¶é—´çª—å†…çš„è¯·æ±‚å¤±è´¥ç‡è¾¾åˆ°è®¾å®šé˜ˆå€¼æ—¶ï¼Œç³»ç»Ÿå°†é€šè¿‡ "),t("strong",[s._v("æ–­è·¯å™¨")]),s._v(" ç›´æ¥å°†æ­¤è¯·æ±‚é“¾è·¯æ–­å¼€ã€‚")]),s._v(" "),t("p",[s._v("ä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šé¢æœåŠ¡Bè°ƒç”¨æœåŠ¡Cåœ¨æŒ‡å®šæ—¶é—´çª—å†…ï¼Œè°ƒç”¨çš„å¤±è´¥ç‡åˆ°è¾¾äº†ä¸€å®šçš„å€¼ï¼Œé‚£ä¹ˆ "),t("code",[s._v("Hystrix")]),s._v(" åˆ™ä¼šè‡ªåŠ¨å°† æœåŠ¡Bä¸C ä¹‹é—´çš„è¯·æ±‚éƒ½æ–­äº†ï¼Œä»¥å…å¯¼è‡´æœåŠ¡é›ªå´©ç°è±¡ã€‚")]),s._v(" "),t("p",[s._v("å…¶å®è¿™é‡Œæ‰€è®²çš„ "),t("strong",[s._v("ç†”æ–­")]),s._v(" å°±æ˜¯æŒ‡çš„ "),t("code",[s._v("Hystrix")]),s._v(" ä¸­çš„ "),t("strong",[s._v("æ–­è·¯å™¨æ¨¡å¼")]),s._v(" ï¼Œä½ å¯ä»¥ä½¿ç”¨ç®€å•çš„ "),t("code",[s._v("@HystrixCommand")]),s._v(" æ³¨è§£æ¥æ ‡æ³¨æŸä¸ªæ–¹æ³•ï¼Œè¿™æ · "),t("code",[s._v("Hystrix")]),s._v(" å°±ä¼šä½¿ç”¨ "),t("strong",[s._v("æ–­è·¯å™¨")]),s._v(" æ¥â€œåŒ…è£…â€è¿™ä¸ªæ–¹æ³•ï¼Œæ¯å½“è°ƒç”¨æ—¶é—´è¶…è¿‡æŒ‡å®šæ—¶é—´æ—¶(é»˜è®¤ä¸º1000ms)ï¼Œæ–­è·¯å™¨å°†ä¼šä¸­æ–­å¯¹è¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨ã€‚")]),s._v(" "),t("p",[s._v("å½“ç„¶ä½ å¯ä»¥å¯¹è¿™ä¸ªæ³¨è§£çš„å¾ˆå¤šå±æ€§è¿›è¡Œè®¾ç½®ï¼Œæ¯”å¦‚è®¾ç½®è¶…æ—¶æ—¶é—´ï¼Œåƒè¿™æ ·ã€‚")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@HystrixCommand")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    commandProperties "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@HystrixProperty")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"execution.isolation.thread.timeoutInMilliseconds"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("value "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"1200"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("List")]),t("span",{pre:!0,attrs:{class:"token generics"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Xxx")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getXxxx")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...çœç•¥ä»£ç é€»è¾‘")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("ä½†æ˜¯ï¼Œæˆ‘æŸ¥é˜…äº†ä¸€äº›åšå®¢ï¼Œå‘ç°ä»–ä»¬éƒ½å°† "),t("strong",[s._v("ç†”æ–­")]),s._v(" å’Œ "),t("strong",[s._v("é™çº§")]),s._v(" çš„æ¦‚å¿µæ··æ·†äº†ï¼Œä»¥æˆ‘çš„ç†è§£ï¼Œ"),t("strong",[s._v("é™çº§æ˜¯ä¸ºäº†æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œå½“ä¸€ä¸ªæ–¹æ³•è°ƒç”¨å¼‚å¸¸æ—¶ï¼Œé€šè¿‡æ‰§è¡Œå¦ä¸€ç§ä»£ç é€»è¾‘æ¥ç»™ç”¨æˆ·å‹å¥½çš„å›å¤")]),s._v("ã€‚è¿™ä¹Ÿå°±å¯¹åº”ç€ "),t("code",[s._v("Hystrix")]),s._v(" çš„ "),t("strong",[s._v("åå¤‡å¤„ç†")]),s._v(" æ¨¡å¼ã€‚ä½ å¯ä»¥é€šè¿‡è®¾ç½® "),t("code",[s._v("fallbackMethod")]),s._v(" æ¥ç»™ä¸€ä¸ªæ–¹æ³•è®¾ç½®å¤‡ç”¨çš„ä»£ç é€»è¾‘ã€‚æ¯”å¦‚è¿™ä¸ªæ—¶å€™æœ‰ä¸€ä¸ªçƒ­ç‚¹æ–°é—»å‡ºç°äº†ï¼Œæˆ‘ä»¬ä¼šæ¨èç»™ç”¨æˆ·æŸ¥çœ‹è¯¦æƒ…ï¼Œç„¶åç”¨æˆ·ä¼šé€šè¿‡idå»æŸ¥è¯¢æ–°é—»çš„è¯¦æƒ…ï¼Œä½†æ˜¯å› ä¸ºè¿™æ¡æ–°é—»å¤ªç«äº†(æ¯”å¦‚æœ€è¿‘ä»€ä¹ˆ*æ˜“å¯¹å§)ï¼Œå¤§é‡ç”¨æˆ·åŒæ—¶è®¿é—®å¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿå´©æºƒï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¿›è¡Œ "),t("strong",[s._v("æœåŠ¡é™çº§")]),s._v(" ï¼Œä¸€äº›è¯·æ±‚ä¼šåšä¸€äº›é™çº§å¤„ç†æ¯”å¦‚å½“å‰äººæ•°å¤ªå¤šè¯·ç¨åæŸ¥çœ‹ç­‰ç­‰ã€‚")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æŒ‡å®šäº†åå¤‡æ–¹æ³•è°ƒç”¨")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@HystrixCommand")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fallbackMethod "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"getHystrixNews"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@GetMapping")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/get/news"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("News")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getNews")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PathVariable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è°ƒç”¨æ–°é—»ç³»ç»Ÿçš„è·å–æ–°é—»api ä»£ç é€»è¾‘çœç•¥")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("News")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getHystrixNews")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@PathVariable")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åšæœåŠ¡é™çº§")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿”å›å½“å‰äººæ•°å¤ªå¤šï¼Œè¯·ç¨åæŸ¥çœ‹")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯hystrixä¹‹å…¶ä»–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯hystrixä¹‹å…¶ä»–"}},[s._v("#")]),s._v(" ä»€ä¹ˆæ˜¯Hystrixä¹‹å…¶ä»–")]),s._v(" "),t("p",[s._v("æˆ‘åœ¨é˜…è¯» ã€ŠSpringå¾®æœåŠ¡å®æˆ˜ã€‹è¿™æœ¬ä¹¦çš„æ—¶å€™è¿˜æ¥è§¦åˆ°äº†ä¸€ä¸ª "),t("strong",[s._v("èˆ±å£æ¨¡å¼")]),s._v(" çš„æ¦‚å¿µã€‚åœ¨ä¸ä½¿ç”¨èˆ±å£æ¨¡å¼çš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡Aè°ƒç”¨æœåŠ¡Bï¼Œè¿™ç§è°ƒç”¨é»˜è®¤çš„æ˜¯ "),t("strong",[s._v("ä½¿ç”¨åŒä¸€æ‰¹çº¿ç¨‹æ¥æ‰§è¡Œ")]),s._v(" çš„ï¼Œè€Œåœ¨ä¸€ä¸ªæœåŠ¡å‡ºç°æ€§èƒ½é—®é¢˜çš„æ—¶å€™ï¼Œå°±ä¼šå‡ºç°æ‰€æœ‰çº¿ç¨‹è¢«åˆ·çˆ†å¹¶ç­‰å¾…å¤„ç†å·¥ä½œï¼ŒåŒæ—¶é˜»å¡æ–°è¯·æ±‚ï¼Œæœ€ç»ˆå¯¼è‡´ç¨‹åºå´©æºƒã€‚è€Œèˆ±å£æ¨¡å¼ä¼šå°†è¿œç¨‹èµ„æºè°ƒç”¨éš”ç¦»åœ¨ä»–ä»¬è‡ªå·±çš„çº¿ç¨‹æ± ä¸­ï¼Œä»¥ä¾¿å¯ä»¥æ§åˆ¶å•ä¸ªè¡¨ç°ä¸ä½³çš„æœåŠ¡ï¼Œè€Œä¸ä¼šä½¿è¯¥ç¨‹åºå´©æºƒã€‚")]),s._v(" "),t("p",[s._v("å…·ä½“å…¶åŸç†æˆ‘æ¨èå¤§å®¶è‡ªå·±å»äº†è§£ä¸€ä¸‹ï¼Œæœ¬ç¯‡æ–‡ç« ä¸­å¯¹ "),t("strong",[s._v("èˆ±å£æ¨¡å¼")]),s._v(" ä¸åšè¿‡å¤šè§£é‡Šã€‚å½“ç„¶è¿˜æœ‰ "),t("strong",[t("code",[s._v("Hystrix")]),s._v(" ä»ªè¡¨ç›˜")]),s._v("ï¼Œå®ƒæ˜¯"),t("strong",[s._v("ç”¨æ¥å®æ—¶ç›‘æ§ "),t("code",[s._v("Hystrix")]),s._v(" çš„å„é¡¹æŒ‡æ ‡ä¿¡æ¯çš„")]),s._v("ï¼Œè¿™é‡Œæˆ‘å°†è¿™ä¸ªé—®é¢˜ä¹ŸæŠ›å‡ºå»ï¼Œå¸Œæœ›æœ‰ä¸äº†è§£çš„å¯ä»¥è‡ªå·±å»æœç´¢ä¸€ä¸‹ã€‚")]),s._v(" "),t("h2",{attrs:{id:"å¾®æœåŠ¡ç½‘å…³-zuul"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¾®æœåŠ¡ç½‘å…³-zuul"}},[s._v("#")]),s._v(" å¾®æœåŠ¡ç½‘å…³â€”â€”Zuul")]),s._v(" "),t("blockquote",[t("p",[s._v("ZUUL æ˜¯ä»è®¾å¤‡å’Œ web ç«™ç‚¹åˆ° Netflix æµåº”ç”¨åç«¯çš„æ‰€æœ‰è¯·æ±‚çš„å‰é—¨ã€‚ä½œä¸ºè¾¹ç•ŒæœåŠ¡åº”ç”¨ï¼ŒZUUL æ˜¯ä¸ºäº†å®ç°åŠ¨æ€è·¯ç”±ã€ç›‘è§†ã€å¼¹æ€§å’Œå®‰å…¨æ€§è€Œæ„å»ºçš„ã€‚å®ƒè¿˜å…·æœ‰æ ¹æ®æƒ…å†µå°†è¯·æ±‚è·¯ç”±åˆ°å¤šä¸ª Amazon Auto Scaling Groupsï¼ˆäºšé©¬é€Šè‡ªåŠ¨ç¼©æ”¾ç»„ï¼Œäºšé©¬é€Šçš„ä¸€ç§äº‘è®¡ç®—æ–¹å¼ï¼‰ çš„èƒ½åŠ›")])]),s._v(" "),t("p",[s._v("åœ¨ä¸Šé¢æˆ‘ä»¬å­¦ä¹ äº† "),t("code",[s._v("Eureka")]),s._v(" ä¹‹åæˆ‘ä»¬çŸ¥é“äº† "),t("em",[s._v("æœåŠ¡æä¾›è€…")]),s._v("  æ˜¯ "),t("em",[s._v("æ¶ˆè´¹è€…")]),s._v(" é€šè¿‡ "),t("code",[s._v("Eureka Server")]),s._v(" è¿›è¡Œè®¿é—®çš„ï¼Œå³ "),t("code",[s._v("Eureka Server")]),s._v(" æ˜¯ "),t("em",[s._v("æœåŠ¡æä¾›è€…")]),s._v(" çš„ç»Ÿä¸€å…¥å£ã€‚é‚£ä¹ˆæ•´ä¸ªåº”ç”¨ä¸­å­˜åœ¨é‚£ä¹ˆå¤š "),t("em",[s._v("æ¶ˆè´¹è€…")]),s._v(" éœ€è¦ç”¨æˆ·è¿›è¡Œè°ƒç”¨ï¼Œè¿™ä¸ªæ—¶å€™ç”¨æˆ·è¯¥æ€æ ·è®¿é—®è¿™äº› "),t("em",[s._v("æ¶ˆè´¹è€…å·¥ç¨‹")]),s._v(" å‘¢ï¼Ÿå½“ç„¶å¯ä»¥åƒä¹‹å‰é‚£æ ·ç›´æ¥è®¿é—®è¿™äº›å·¥ç¨‹ã€‚ä½†è¿™ç§æ–¹å¼æ²¡æœ‰ç»Ÿä¸€çš„æ¶ˆè´¹è€…å·¥ç¨‹è°ƒç”¨å…¥å£ï¼Œä¸ä¾¿äºè®¿é—®ä¸ç®¡ç†ï¼Œè€Œ Zuul å°±æ˜¯è¿™æ ·çš„ä¸€ä¸ªå¯¹äº "),t("em",[s._v("æ¶ˆè´¹è€…")]),s._v(" çš„ç»Ÿä¸€å…¥å£ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("å¦‚æœå­¦è¿‡å‰ç«¯çš„è‚¯å®šéƒ½çŸ¥é“ Router å§ï¼Œæ¯”å¦‚ Flutter ä¸­çš„è·¯ç”±ï¼ŒVueï¼ŒReactä¸­çš„è·¯ç”±ï¼Œç”¨äº† Zuul ä½ ä¼šå‘ç°åœ¨è·¯ç”±åŠŸèƒ½æ–¹é¢å’Œå‰ç«¯é…ç½®è·¯ç”±åŸºæœ¬æ˜¯ä¸€ä¸ªç†ã€‚ğŸ˜„ æˆ‘å¶å°”æ’¸æ’¸ Flutterã€‚")])]),s._v(" "),t("p",[s._v("å¤§å®¶å¯¹ç½‘å…³åº”è¯¥å¾ˆç†Ÿå§ï¼Œç®€å•æ¥è®²ç½‘å…³æ˜¯ç³»ç»Ÿå”¯ä¸€å¯¹å¤–çš„å…¥å£ï¼Œä»‹äºå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯ä¹‹é—´ï¼Œç”¨äºå¯¹è¯·æ±‚è¿›è¡Œ"),t("strong",[s._v("é‰´æƒ")]),s._v("ã€"),t("strong",[s._v("é™æµ")]),s._v("ã€ "),t("strong",[s._v("è·¯ç”±")]),s._v("ã€"),t("strong",[s._v("ç›‘æ§")]),s._v("ç­‰åŠŸèƒ½ã€‚")]),s._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/zuul-sj22o93nfdsjkdsf.jpg"}}),s._v(" "),t("p",[s._v("æ²¡é”™ï¼Œç½‘å…³æœ‰çš„åŠŸèƒ½ï¼Œ"),t("code",[s._v("Zuul")]),s._v(" åŸºæœ¬éƒ½æœ‰ã€‚è€Œ "),t("code",[s._v("Zuul")]),s._v(" ä¸­æœ€å…³é”®çš„å°±æ˜¯ "),t("strong",[s._v("è·¯ç”±å’Œè¿‡æ»¤å™¨")]),s._v(" äº†ï¼Œåœ¨å®˜æ–¹æ–‡æ¡£ä¸­ "),t("code",[s._v("Zuul")]),s._v(" çš„æ ‡é¢˜å°±æ˜¯")]),s._v(" "),t("blockquote",[t("p",[s._v("Router and Filter : Zuul")])]),s._v(" "),t("h3",{attrs:{id:"zuul-çš„è·¯ç”±åŠŸèƒ½"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zuul-çš„è·¯ç”±åŠŸèƒ½"}},[s._v("#")]),s._v(" Zuul çš„è·¯ç”±åŠŸèƒ½")]),s._v(" "),t("h4",{attrs:{id:"ç®€å•é…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç®€å•é…ç½®"}},[s._v("#")]),s._v(" ç®€å•é…ç½®")]),s._v(" "),t("p",[s._v("æœ¬æ¥æƒ³ç»™ä½ ä»¬å¤åˆ¶ä¸€äº›ä»£ç ï¼Œä½†æ˜¯æƒ³äº†æƒ³ï¼Œå› ä¸ºå„ä¸ªä»£ç é…ç½®æ¯”è¾ƒé›¶æ•£ï¼Œçœ‹èµ·æ¥ä¹Ÿæ¯”è¾ƒé›¶æ•£ï¼Œæˆ‘å†³å®šè¿˜æ˜¯ç»™ä½ ä»¬ç”»ä¸ªå›¾æ¥è§£é‡Šå§ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("è¯·ä¸è¦å› ä¸ºæˆ‘è¿™ä¹ˆå¥½å°±ç»™æˆ‘ç‚¹èµ ğŸ‘ ã€‚ ç–¯ç‹‚æš—ç¤ºã€‚")])]),s._v(" "),t("p",[s._v("æ¯”å¦‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å·²ç»å‘ "),t("code",[s._v("Eureka Server")]),s._v(" æ³¨å†Œäº†ä¸¤ä¸ª "),t("code",[s._v("Consumer")]),s._v(" ã€ä¸‰ä¸ª "),t("code",[s._v("Provicer")]),s._v(" ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å†åŠ ä¸ª "),t("code",[s._v("Zuul")]),s._v(" ç½‘å…³åº”è¯¥å˜æˆè¿™æ ·å­äº†ã€‚")]),s._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/zuul-sj22o93nfdsjkdsf2312.jpg"}}),s._v(" "),t("p",[s._v("emmmï¼Œä¿¡æ¯é‡æœ‰ç‚¹å¤§ï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹ã€‚å…³äºå‰é¢çš„çŸ¥è¯†æˆ‘å°±ä¸è§£é‡Šäº†ğŸ˜ã€‚")]),s._v(" "),t("p",[s._v("é¦–å…ˆï¼Œ"),t("code",[s._v("Zuul")]),s._v(" éœ€è¦å‘ "),t("code",[s._v("Eureka")]),s._v(" è¿›è¡Œæ³¨å†Œï¼Œæ³¨å†Œæœ‰å•¥å¥½å¤„å‘¢ï¼Ÿ")]),s._v(" "),t("p",[s._v("ä½ å‚»å‘€ï¼Œ"),t("code",[s._v("Consumer")]),s._v(" éƒ½å‘ "),t("code",[s._v("Eureka Server")]),s._v(" è¿›è¡Œæ³¨å†Œäº†ï¼Œæˆ‘ç½‘å…³æ˜¯ä¸æ˜¯åªè¦æ³¨å†Œå°±èƒ½æ‹¿åˆ°æ‰€æœ‰ "),t("code",[s._v("Consumer")]),s._v(" çš„ä¿¡æ¯äº†ï¼Ÿ")]),s._v(" "),t("p",[s._v("æ‹¿åˆ°ä¿¡æ¯æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿ")]),s._v(" "),t("p",[s._v("æˆ‘æ‹¿åˆ°ä¿¡æ¯æˆ‘æ˜¯ä¸æ˜¯å¯ä»¥è·å–æ‰€æœ‰çš„ "),t("code",[s._v("Consumer")]),s._v(" çš„å…ƒæ•°æ®(åç§°ï¼Œipï¼Œç«¯å£)ï¼Ÿ")]),s._v(" "),t("p",[s._v("æ‹¿åˆ°è¿™äº›å…ƒæ•°æ®æœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿæ‹¿åˆ°äº†æˆ‘ä»¬æ˜¯ä¸æ˜¯ç›´æ¥å¯ä»¥åš"),t("strong",[s._v("è·¯ç”±æ˜ å°„")]),s._v("ï¼Ÿæ¯”å¦‚åŸæ¥ç”¨æˆ·è°ƒç”¨ "),t("code",[s._v("Consumer1")]),s._v(" çš„æ¥å£ "),t("code",[s._v("localhost:8001/studentInfo/update")]),s._v(" è¿™ä¸ªè¯·æ±‚ï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥è¿™æ ·è¿›è¡Œè°ƒç”¨äº†å‘¢ï¼Ÿ"),t("code",[s._v("localhost:9000/consumer1/studentInfo/update")]),s._v(" å‘¢ï¼Ÿä½ è¿™æ ·æ˜¯ä¸æ˜¯æç„¶å¤§æ‚Ÿäº†ï¼Ÿ")]),s._v(" "),t("blockquote",[t("p",[s._v("è¿™é‡Œçš„urlä¸ºäº†è®©æ›´å¤šäººçœ‹æ‡‚æ‰€ä»¥æ²¡æœ‰ä½¿ç”¨ restful é£æ ¼ã€‚")])]),s._v(" "),t("p",[s._v("ä¸Šé¢çš„ä½ ç†è§£äº†ï¼Œé‚£ä¹ˆå°±èƒ½ç†è§£å…³äº "),t("code",[s._v("Zuul")]),s._v(" æœ€åŸºæœ¬çš„é…ç½®äº†ï¼Œçœ‹ä¸‹é¢ã€‚")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("server")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("port")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9000")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("eureka")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("client")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("service-url")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# è¿™é‡Œåªè¦æ³¨å†Œ Eureka å°±è¡Œäº†")]),s._v("\n      "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("defaultZone")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" http"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("//localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("9997/eureka\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("ç„¶ååœ¨å¯åŠ¨ç±»ä¸ŠåŠ å…¥ "),t("code",[s._v("@EnableZuulProxy")]),s._v(" æ³¨è§£å°±è¡Œäº†ã€‚æ²¡é”™ï¼Œå°±æ˜¯é‚£ä¹ˆç®€å•ğŸ˜ƒã€‚")]),s._v(" "),t("h4",{attrs:{id:"ç»Ÿä¸€å‰ç¼€"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç»Ÿä¸€å‰ç¼€"}},[s._v("#")]),s._v(" ç»Ÿä¸€å‰ç¼€")]),s._v(" "),t("p",[s._v("è¿™ä¸ªå¾ˆç®€å•ï¼Œå°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨å‰é¢åŠ ä¸€ä¸ªç»Ÿä¸€çš„å‰ç¼€ï¼Œæ¯”å¦‚æˆ‘ä»¬åˆšåˆšè°ƒç”¨çš„æ˜¯ "),t("code",[s._v("localhost:9000/consumer1/studentInfo/update")]),s._v("ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åœ¨ "),t("code",[s._v("yaml")]),s._v(" é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ã€‚")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("zuul")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("prefix")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /zuul\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("è¿™æ ·æˆ‘ä»¬å°±éœ€è¦é€šè¿‡ "),t("code",[s._v("localhost:9000/zuul/consumer1/studentInfo/update")]),s._v(" æ¥è¿›è¡Œè®¿é—®äº†ã€‚")]),s._v(" "),t("h4",{attrs:{id:"è·¯ç”±ç­–ç•¥é…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è·¯ç”±ç­–ç•¥é…ç½®"}},[s._v("#")]),s._v(" è·¯ç”±ç­–ç•¥é…ç½®")]),s._v(" "),t("p",[s._v("ä½ ä¼šå‘ç°å‰é¢çš„è®¿é—®æ–¹å¼(ç›´æ¥ä½¿ç”¨æœåŠ¡å)ï¼Œéœ€è¦å°†å¾®æœåŠ¡åç§°æš´éœ²ç»™ç”¨æˆ·ï¼Œä¼šå­˜åœ¨å®‰å…¨æ€§é—®é¢˜ã€‚æ‰€ä»¥ï¼Œå¯ä»¥è‡ªå®šä¹‰è·¯å¾„æ¥æ›¿ä»£å¾®æœåŠ¡åç§°ï¼Œå³è‡ªå®šä¹‰è·¯ç”±ç­–ç•¥ã€‚")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("zuul")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("routes")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("consumer1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /FrancisQ1/"),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("**")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("consumer2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" /FrancisQ2/"),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("**")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("è¿™ä¸ªæ—¶å€™ä½ å°±å¯ä»¥ä½¿ç”¨ "),t("code"),s._v("localhost:9000/zuul/FrancisQ1/studentInfo/update` è¿›è¡Œè®¿é—®äº†ã€‚")]),s._v(" "),t("h4",{attrs:{id:"æœåŠ¡åå±è”½"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æœåŠ¡åå±è”½"}},[s._v("#")]),s._v(" æœåŠ¡åå±è”½")]),s._v(" "),t("p",[s._v("è¿™ä¸ªæ—¶å€™ä½ åˆ«ä»¥ä¸ºä½ å¥½äº†ï¼Œä½ å¯ä»¥è¯•è¯•ï¼Œåœ¨ä½ é…ç½®å®Œè·¯ç”±ç­–ç•¥ä¹‹åä½¿ç”¨å¾®æœåŠ¡åç§°è¿˜æ˜¯å¯ä»¥è®¿é—®çš„ï¼Œè¿™ä¸ªæ—¶å€™ä½ éœ€è¦å°†æœåŠ¡åå±è”½ã€‚")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("zuul")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ignore-services")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h4",{attrs:{id:"è·¯å¾„å±è”½"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#è·¯å¾„å±è”½"}},[s._v("#")]),s._v(" è·¯å¾„å±è”½")]),s._v(" "),t("p",[t("code",[s._v("Zuul")]),s._v(" è¿˜å¯ä»¥æŒ‡å®šå±è”½æ‰çš„è·¯å¾„ URIï¼Œå³åªè¦ç”¨æˆ·è¯·æ±‚ä¸­åŒ…å«æŒ‡å®šçš„ URI è·¯å¾„ï¼Œé‚£ä¹ˆè¯¥è¯·æ±‚å°†æ— æ³•è®¿é—®åˆ°æŒ‡å®šçš„æœåŠ¡ã€‚é€šè¿‡è¯¥æ–¹å¼å¯ä»¥é™åˆ¶ç”¨æˆ·çš„æƒé™ã€‚")]),s._v(" "),t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("zuul")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("ignore-patterns")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token important"}},[s._v("**/auto/**")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("p",[s._v("è¿™æ ·å…³äº auto çš„è¯·æ±‚æˆ‘ä»¬å°±å¯ä»¥è¿‡æ»¤æ‰äº†ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("** ä»£è¡¨åŒ¹é…å¤šçº§ä»»æ„è·¯å¾„")]),s._v(" "),t("p",[s._v("*ä»£è¡¨åŒ¹é…ä¸€çº§ä»»æ„è·¯å¾„")])]),s._v(" "),t("h4",{attrs:{id:"æ•æ„Ÿè¯·æ±‚å¤´å±è”½"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ•æ„Ÿè¯·æ±‚å¤´å±è”½"}},[s._v("#")]),s._v(" æ•æ„Ÿè¯·æ±‚å¤´å±è”½")]),s._v(" "),t("p",[s._v("é»˜è®¤æƒ…å†µä¸‹ï¼Œåƒ "),t("code",[s._v("Cookie")]),s._v("ã€"),t("code",[s._v("Set-Cookie")]),s._v(" ç­‰æ•æ„Ÿè¯·æ±‚å¤´ä¿¡æ¯ä¼šè¢« "),t("code",[s._v("zuul")]),s._v(" å±è”½æ‰ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™äº›é»˜è®¤å±è”½å»æ‰ï¼Œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥æ·»åŠ è¦å±è”½çš„è¯·æ±‚å¤´ã€‚")]),s._v(" "),t("h3",{attrs:{id:"zuul-çš„è¿‡æ»¤åŠŸèƒ½"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zuul-çš„è¿‡æ»¤åŠŸèƒ½"}},[s._v("#")]),s._v(" Zuul çš„è¿‡æ»¤åŠŸèƒ½")]),s._v(" "),t("p",[s._v("å¦‚æœè¯´ï¼Œè·¯ç”±åŠŸèƒ½æ˜¯ "),t("code",[s._v("Zuul")]),s._v(" çš„åŸºæ“çš„è¯ï¼Œé‚£ä¹ˆ"),t("strong",[s._v("è¿‡æ»¤å™¨")]),s._v("å°±æ˜¯ "),t("code",[s._v("Zuul")]),s._v("çš„åˆ©å™¨äº†ã€‚æ¯•ç«Ÿæ‰€æœ‰è¯·æ±‚éƒ½ç»è¿‡ç½‘å…³(Zuul)ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿›è¡Œå„ç§è¿‡æ»¤ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½å®ç° "),t("strong",[s._v("é™æµ")]),s._v("ï¼Œ"),t("strong",[s._v("ç°åº¦å‘å¸ƒ")]),s._v("ï¼Œ"),t("strong",[s._v("æƒé™æ§åˆ¶")]),s._v(" ç­‰ç­‰ã€‚")]),s._v(" "),t("h4",{attrs:{id:"ç®€å•å®ç°ä¸€ä¸ªè¯·æ±‚æ—¶é—´æ—¥å¿—æ‰“å°"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ç®€å•å®ç°ä¸€ä¸ªè¯·æ±‚æ—¶é—´æ—¥å¿—æ‰“å°"}},[s._v("#")]),s._v(" ç®€å•å®ç°ä¸€ä¸ªè¯·æ±‚æ—¶é—´æ—¥å¿—æ‰“å°")]),s._v(" "),t("p",[s._v("è¦å®ç°è‡ªå·±å®šä¹‰çš„ "),t("code",[s._v("Filter")]),s._v(" æˆ‘ä»¬åªéœ€è¦ç»§æ‰¿ "),t("code",[s._v("ZuulFilter")]),s._v(" ç„¶åå°†è¿™ä¸ªè¿‡æ»¤å™¨ç±»ä»¥ "),t("code",[s._v("@Component")]),s._v(" æ³¨è§£åŠ å…¥ Spring å®¹å™¨ä¸­å°±è¡Œäº†ã€‚")]),s._v(" "),t("p",[s._v("åœ¨ç»™ä½ ä»¬çœ‹ä»£ç ä¹‹å‰æˆ‘å…ˆç»™ä½ ä»¬è§£é‡Šä¸€ä¸‹å…³äºè¿‡æ»¤å™¨çš„ä¸€äº›æ³¨æ„ç‚¹ã€‚")]),s._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/zuul-sj22o93nfdsjkdsf2312244.jpg"}}),s._v(" "),t("p",[s._v("è¿‡æ»¤å™¨ç±»å‹ï¼š"),t("code",[s._v("Pre")]),s._v("ã€"),t("code",[s._v("Routing")]),s._v("ã€"),t("code",[s._v("Post")]),s._v("ã€‚å‰ç½®"),t("code",[s._v("Pre")]),s._v("å°±æ˜¯åœ¨è¯·æ±‚ä¹‹å‰è¿›è¡Œè¿‡æ»¤ï¼Œ"),t("code",[s._v("Routing")]),s._v("è·¯ç”±è¿‡æ»¤å™¨å°±æ˜¯æˆ‘ä»¬ä¸Šé¢æ‰€è®²çš„è·¯ç”±ç­–ç•¥ï¼Œè€Œ"),t("code",[s._v("Post")]),s._v("åç½®è¿‡æ»¤å™¨å°±æ˜¯åœ¨ "),t("code",[s._v("Response")]),s._v(" ä¹‹å‰è¿›è¡Œè¿‡æ»¤çš„è¿‡æ»¤å™¨ã€‚ä½ å¯ä»¥è§‚å¯Ÿä¸Šå›¾ç»“åˆç€ç†è§£ï¼Œå¹¶ä¸”ä¸‹é¢æˆ‘ä¼šç»™å‡ºç›¸åº”çš„æ³¨é‡Šã€‚")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åŠ å…¥Springå®¹å™¨")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PreRequestFilter")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ZuulFilter")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿”å›è¿‡æ»¤å™¨ç±»å‹ è¿™é‡Œæ˜¯å‰ç½®è¿‡æ»¤å™¨")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("filterType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FilterConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PRE_TYPE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æŒ‡å®šè¿‡æ»¤é¡ºåº è¶Šå°è¶Šå…ˆæ‰§è¡Œï¼Œè¿™é‡Œç¬¬ä¸€ä¸ªæ‰§è¡Œ")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å½“ç„¶ä¸æ˜¯åªçœŸæ­£ç¬¬ä¸€ä¸ª åœ¨Zuulå†…ç½®ä¸­æœ‰å…¶ä»–è¿‡æ»¤å™¨ä¼šå…ˆæ‰§è¡Œ")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// é‚£æ˜¯å†™æ­»çš„ æ¯”å¦‚ SERVLET_DETECTION_FILTER_ORDER = -3")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("filterOrder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä»€ä¹ˆæ—¶å€™è¯¥è¿›è¡Œè¿‡æ»¤")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿™é‡Œæˆ‘ä»¬å¯ä»¥è¿›è¡Œä¸€äº›åˆ¤æ–­ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è¿‡æ»¤æ‰ä¸€äº›ä¸ç¬¦åˆè§„å®šçš„è¯·æ±‚ç­‰ç­‰")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shouldFilter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å¦‚æœè¿‡æ»¤å™¨å…è®¸é€šè¿‡åˆ™æ€ä¹ˆè¿›è¡Œå¤„ç†")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ZuulException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿™é‡Œæˆ‘è®¾ç½®äº†å…¨å±€çš„RequestContextå¹¶è®°å½•äº†è¯·æ±‚å¼€å§‹æ—¶é—´")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestContext")]),s._v(" ctx "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCurrentContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        ctx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("set")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"startTime"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br")])]),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// lombokçš„æ—¥å¿—")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Slf4j")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// åŠ å…¥ Spring å®¹å™¨")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("AccessLogFilter")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ZuulFilter")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æŒ‡å®šè¯¥è¿‡æ»¤å™¨çš„è¿‡æ»¤ç±»å‹")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æ­¤æ—¶æ˜¯åç½®è¿‡æ»¤å™¨")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("filterType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FilterConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("POST_TYPE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// SEND_RESPONSE_FILTER_ORDER æ˜¯æœ€åä¸€ä¸ªè¿‡æ»¤å™¨")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æˆ‘ä»¬æ­¤è¿‡æ»¤å™¨åœ¨å®ƒä¹‹å‰æ‰§è¡Œ")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("filterOrder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FilterConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SEND_RESPONSE_FILTER_ORDER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shouldFilter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿‡æ»¤æ—¶æ‰§è¡Œçš„ç­–ç•¥")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ZuulException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestContext")]),s._v(" context "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCurrentContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("HttpServletRequest")]),s._v(" request "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRequest")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ä»RequestContextè·å–åŸå…ˆçš„å¼€å§‹æ—¶é—´ å¹¶é€šè¿‡å®ƒè®¡ç®—æ•´ä¸ªæ—¶é—´é—´éš”")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),s._v(" startTime "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Long")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("get")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"startTime"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// è¿™é‡Œæˆ‘å¯ä»¥è·å–HttpServletRequestæ¥è·å–URIå¹¶ä¸”æ‰“å°å‡ºæ¥")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" uri "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" request"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getRequestURI")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("long")]),s._v(" duration "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("currentTimeMillis")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" startTime"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"uri: "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" uri "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('", duration: "')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" duration "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"ms"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br")])]),t("p",[s._v("ä¸Šé¢å°±ç®€å•å®ç°äº†è¯·æ±‚æ—¶é—´æ—¥å¿—æ‰“å°åŠŸèƒ½ï¼Œä½ æœ‰æ²¡æœ‰æ„Ÿå—åˆ° "),t("code",[s._v("Zuul")]),s._v(" è¿‡æ»¤åŠŸèƒ½çš„å¼ºå¤§äº†å‘¢ï¼Ÿ")]),s._v(" "),t("p",[s._v("æ²¡æœ‰ï¼Ÿå¥½çš„ã€é‚£æˆ‘ä»¬å†æ¥ã€‚")]),s._v(" "),t("h4",{attrs:{id:"ä»¤ç‰Œæ¡¶é™æµ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä»¤ç‰Œæ¡¶é™æµ"}},[s._v("#")]),s._v(" ä»¤ç‰Œæ¡¶é™æµ")]),s._v(" "),t("p",[s._v("å½“ç„¶ä¸ä»…ä»…æ˜¯ä»¤ç‰Œæ¡¶é™æµæ–¹å¼ï¼Œ"),t("code",[s._v("Zuul")]),s._v(" åªè¦æ˜¯é™æµçš„æ´»å®ƒéƒ½èƒ½å¹²ï¼Œè¿™é‡Œæˆ‘åªæ˜¯ç®€å•ä¸¾ä¸ªğŸŒ°ã€‚")]),s._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/zuui-ä»¤ç‰Œæ¡¶é™æµ.jpg",alt:"ä»¤ç‰Œæ¡¶é™æµ"}}),s._v(" "),t("p",[s._v("æˆ‘å…ˆæ¥è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯ "),t("strong",[s._v("ä»¤ç‰Œæ¡¶é™æµ")]),s._v(" å§ã€‚")]),s._v(" "),t("p",[s._v("é¦–å…ˆæˆ‘ä»¬ä¼šæœ‰ä¸ªæ¡¶ï¼Œå¦‚æœé‡Œé¢æ²¡æœ‰æ»¡é‚£ä¹ˆå°±ä¼šä»¥ä¸€å®š "),t("strong",[s._v("å›ºå®šçš„é€Ÿç‡")]),s._v(" ä¼šå¾€é‡Œé¢æ”¾ä»¤ç‰Œï¼Œä¸€ä¸ªè¯·æ±‚è¿‡æ¥é¦–å…ˆè¦ä»æ¡¶ä¸­è·å–ä»¤ç‰Œï¼Œå¦‚æœæ²¡æœ‰è·å–åˆ°ï¼Œé‚£ä¹ˆè¿™ä¸ªè¯·æ±‚å°±æ‹’ç»ï¼Œå¦‚æœè·å–åˆ°é‚£ä¹ˆå°±æ”¾è¡Œã€‚å¾ˆç®€å•å§ï¼Œå•Šå“ˆå“ˆã€")]),s._v(" "),t("p",[s._v("ä¸‹é¢æˆ‘ä»¬å°±é€šè¿‡ "),t("code",[s._v("Zuul")]),s._v(" çš„å‰ç½®è¿‡æ»¤å™¨æ¥å®ç°ä¸€ä¸‹ä»¤ç‰Œæ¡¶é™æµã€‚")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lgq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("zuul"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("filter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("google"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("common"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("util"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("concurrent"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RateLimiter")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("netflix"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("zuul"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ZuulFilter")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("netflix"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("zuul"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestContext")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("netflix"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("zuul"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("exception"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ZuulException")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("lombok"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("extern"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("slf4j"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Slf4j")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("springframework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cloud"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("netflix"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("zuul"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("filters"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("support"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FilterConstants")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token import"}},[t("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("springframework"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("stereotype"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Component")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Component")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Slf4j")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RouteFilter")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ZuulFilter")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å®šä¹‰ä¸€ä¸ªä»¤ç‰Œæ¡¶ï¼Œæ¯ç§’äº§ç”Ÿ2ä¸ªä»¤ç‰Œï¼Œå³æ¯ç§’æœ€å¤šå¤„ç†2ä¸ªè¯·æ±‚")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RateLimiter")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RATE_LIMITER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RateLimiter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("create")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("filterType")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FilterConstants")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("PRE_TYPE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("filterOrder")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Object")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("run")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("throws")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ZuulException")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("info")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"æ”¾è¡Œ"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("shouldFilter")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestContext")]),s._v(" context "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("getCurrentContext")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RATE_LIMITER")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tryAcquire")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            log"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("warn")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"è®¿é—®é‡è¶…è½½"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// æŒ‡å®šå½“å‰è¯·æ±‚æœªé€šè¿‡è¿‡æ»¤")]),s._v("\n            context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setSendZuulResponse")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// å‘å®¢æˆ·ç«¯è¿”å›å“åº”ç 429ï¼Œè¯·æ±‚æ•°é‡è¿‡å¤š")]),s._v("\n            context"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("setResponseStatusCode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("429")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br")])]),t("p",[s._v("è¿™æ ·æˆ‘ä»¬å°±èƒ½å°†è¯·æ±‚æ•°é‡æ§åˆ¶åœ¨ä¸€ç§’ä¸¤ä¸ªï¼Œæœ‰æ²¡æœ‰è§‰å¾—å¾ˆé…·ï¼Ÿ")]),s._v(" "),t("h3",{attrs:{id:"å…³äº-zuul-çš„å…¶ä»–"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å…³äº-zuul-çš„å…¶ä»–"}},[s._v("#")]),s._v(" å…³äº Zuul  çš„å…¶ä»–")]),s._v(" "),t("p",[t("code",[s._v("Zuul")]),s._v(" çš„è¿‡æ»¤å™¨çš„åŠŸèƒ½è‚¯å®šä¸æ­¢ä¸Šé¢æˆ‘æ‰€å®ç°çš„ä¸¤ç§ï¼Œå®ƒè¿˜å¯ä»¥å®ç° "),t("strong",[s._v("æƒé™æ ¡éªŒ")]),s._v("ï¼ŒåŒ…æ‹¬æˆ‘ä¸Šé¢æåˆ°çš„ "),t("strong",[s._v("ç°åº¦å‘å¸ƒ")]),s._v(" ç­‰ç­‰ã€‚")]),s._v(" "),t("p",[s._v("å½“ç„¶ï¼Œ"),t("code",[s._v("Zuul")]),s._v(" ä½œä¸ºç½‘å…³è‚¯å®šä¹Ÿå­˜åœ¨ "),t("strong",[s._v("å•ç‚¹é—®é¢˜")]),s._v(" ï¼Œå¦‚æœæˆ‘ä»¬è¦ä¿è¯ "),t("code",[s._v("Zuul")]),s._v(" çš„é«˜å¯ç”¨ï¼Œæˆ‘ä»¬å°±éœ€è¦è¿›è¡Œ "),t("code",[s._v("Zuul")]),s._v(" çš„é›†ç¾¤é…ç½®ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥å€ŸåŠ©é¢å¤–çš„ä¸€äº›è´Ÿè½½å‡è¡¡å™¨æ¯”å¦‚ "),t("code",[s._v("Nginx")]),s._v(" ã€‚")]),s._v(" "),t("p",[s._v("##Spring Cloudé…ç½®ç®¡ç†â€”â€”Config")]),s._v(" "),t("h3",{attrs:{id:"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿›è¡Œé…ç½®ç®¡ç†"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿›è¡Œé…ç½®ç®¡ç†"}},[s._v("#")]),s._v(" ä¸ºä»€ä¹ˆè¦ä½¿ç”¨è¿›è¡Œé…ç½®ç®¡ç†ï¼Ÿ")]),s._v(" "),t("p",[s._v("å½“æˆ‘ä»¬çš„å¾®æœåŠ¡ç³»ç»Ÿå¼€å§‹æ…¢æ…¢åœ°åºå¤§èµ·æ¥ï¼Œé‚£ä¹ˆå¤š "),t("code",[s._v("Consumer")]),s._v(" ã€"),t("code",[s._v("Provider")]),s._v(" ã€"),t("code",[s._v("Eureka Server")]),s._v(" ã€"),t("code",[s._v("Zuul")]),s._v(" ç³»ç»Ÿéƒ½ä¼šæŒæœ‰è‡ªå·±çš„é…ç½®ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åœ¨é¡¹ç›®è¿è¡Œçš„æ—¶å€™å¯èƒ½éœ€è¦æ›´æ”¹æŸäº›åº”ç”¨çš„é…ç½®ï¼Œå¦‚æœæˆ‘ä»¬ä¸è¿›è¡Œé…ç½®çš„ç»Ÿä¸€ç®¡ç†ï¼Œæˆ‘ä»¬åªèƒ½"),t("strong",[s._v("å»æ¯ä¸ªåº”ç”¨ä¸‹ä¸€ä¸ªä¸€ä¸ªå¯»æ‰¾é…ç½®æ–‡ä»¶ç„¶åä¿®æ”¹é…ç½®æ–‡ä»¶å†é‡å¯åº”ç”¨")]),s._v("ã€‚")]),s._v(" "),t("p",[s._v("é¦–å…ˆå¯¹äºåˆ†å¸ƒå¼ç³»ç»Ÿè€Œè¨€æˆ‘ä»¬å°±ä¸åº”è¯¥å»æ¯ä¸ªåº”ç”¨ä¸‹å»åˆ†åˆ«ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œå†è€…å¯¹äºé‡å¯åº”ç”¨æ¥è¯´ï¼ŒæœåŠ¡æ— æ³•è®¿é—®æ‰€ä»¥ç›´æ¥æŠ›å¼ƒäº†å¯ç”¨æ€§ï¼Œè¿™æ˜¯æˆ‘ä»¬æ›´ä¸æ„¿è§åˆ°çš„ã€‚")]),s._v(" "),t("p",[s._v("é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§æ–¹æ³•"),t("strong",[s._v("æ—¢èƒ½å¯¹é…ç½®æ–‡ä»¶ç»Ÿä¸€åœ°è¿›è¡Œç®¡ç†ï¼Œåˆèƒ½åœ¨é¡¹ç›®è¿è¡Œæ—¶åŠ¨æ€ä¿®æ”¹é…ç½®æ–‡ä»¶å‘¢ï¼Ÿ")])]),s._v(" "),t("p",[s._v("é‚£å°±æ˜¯æˆ‘ä»Šå¤©æ‰€è¦ä»‹ç»çš„ "),t("code",[s._v("Spring Cloud Config")]),s._v(" ã€‚")]),s._v(" "),t("blockquote",[t("p",[s._v("èƒ½è¿›è¡Œé…ç½®ç®¡ç†çš„æ¡†æ¶ä¸æ­¢ "),t("code",[s._v("Spring Cloud Config")]),s._v(" ä¸€ç§ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®éœ€æ±‚è‡ªå·±é€‰æ‹©ï¼ˆ"),t("code",[s._v("disconf")]),s._v("ï¼Œé˜¿æ³¢ç½—ç­‰ç­‰ï¼‰ã€‚è€Œä¸”å¯¹äº "),t("code",[s._v("Config")]),s._v(" æ¥è¯´æœ‰äº›åœ°æ–¹å®ç°çš„ä¸æ˜¯é‚£ä¹ˆå°½äººæ„ã€‚")])]),s._v(" "),t("h3",{attrs:{id:"config-æ˜¯ä»€ä¹ˆ"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#config-æ˜¯ä»€ä¹ˆ"}},[s._v("#")]),s._v(" Config æ˜¯ä»€ä¹ˆ")]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v("Spring Cloud Config")]),s._v(" ä¸ºåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„å¤–éƒ¨åŒ–é…ç½®æä¾›æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯æ”¯æŒã€‚ä½¿ç”¨ "),t("code",[s._v("Config")]),s._v(" æœåŠ¡å™¨ï¼Œå¯ä»¥åœ¨ä¸­å¿ƒä½ç½®ç®¡ç†æ‰€æœ‰ç¯å¢ƒä¸­åº”ç”¨ç¨‹åºçš„å¤–éƒ¨å±æ€§ã€‚")])]),s._v(" "),t("p",[s._v("ç®€å•æ¥è¯´ï¼Œ"),t("code",[s._v("Spring Cloud Config")]),s._v(" å°±æ˜¯èƒ½å°†å„ä¸ª åº”ç”¨/ç³»ç»Ÿ/æ¨¡å— çš„é…ç½®æ–‡ä»¶å­˜æ”¾åˆ° "),t("strong",[s._v("ç»Ÿä¸€çš„åœ°æ–¹ç„¶åè¿›è¡Œç®¡ç†")]),s._v("(Git æˆ–è€… SVN)ã€‚")]),s._v(" "),t("p",[s._v("ä½ æƒ³ä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„åº”ç”¨æ˜¯ä¸æ˜¯åªæœ‰å¯åŠ¨çš„æ—¶å€™æ‰ä¼šè¿›è¡Œé…ç½®æ–‡ä»¶çš„åŠ è½½ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„ "),t("code",[s._v("Spring Cloud Config")]),s._v(" å°±æš´éœ²å‡ºä¸€ä¸ªæ¥å£ç»™å¯åŠ¨åº”ç”¨æ¥è·å–å®ƒæ‰€æƒ³è¦çš„é…ç½®æ–‡ä»¶ï¼Œåº”ç”¨è·å–åˆ°é…ç½®æ–‡ä»¶ç„¶åå†è¿›è¡Œå®ƒçš„åˆå§‹åŒ–å·¥ä½œã€‚å°±å¦‚ä¸‹å›¾ã€‚")]),s._v(" "),t("img",{staticStyle:{zoom:"50%"},attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/config-ksksks.jpg"}}),s._v(" "),t("p",[s._v("å½“ç„¶è¿™é‡Œä½ è‚¯å®šè¿˜ä¼šæœ‰ä¸€ä¸ªç–‘é—®ï¼Œå¦‚æœæˆ‘åœ¨åº”ç”¨è¿è¡Œæ—¶å»æ›´æ”¹è¿œç¨‹é…ç½®ä»“åº“(Git)ä¸­çš„å¯¹åº”é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆä¾èµ–äºè¿™ä¸ªé…ç½®æ–‡ä»¶çš„å·²å¯åŠ¨çš„åº”ç”¨ä¼šä¸ä¼šè¿›è¡Œå…¶ç›¸åº”é…ç½®çš„æ›´æ”¹å‘¢ï¼Ÿ")]),s._v(" "),t("p",[s._v("ç­”æ¡ˆæ˜¯ä¸ä¼šçš„ã€‚")]),s._v(" "),t("p",[s._v("ä»€ä¹ˆï¼Ÿé‚£æ€ä¹ˆè¿›è¡ŒåŠ¨æ€ä¿®æ”¹é…ç½®æ–‡ä»¶å‘¢ï¼Ÿè¿™ä¸æ˜¯å‡ºç°äº† "),t("strong",[s._v("é…ç½®æ¼‚ç§»")]),s._v(" å—ï¼Ÿä½ ä¸ªæ¸£ç”·ğŸ˜¡ï¼Œä½ åˆéª—æˆ‘ï¼")]),s._v(" "),t("p",[s._v("åˆ«æ€¥å˜›ï¼Œä½ å¯ä»¥ä½¿ç”¨ "),t("code",[s._v("Webhooks")]),s._v(" ï¼Œè¿™æ˜¯  "),t("code",[s._v("github")]),s._v(" æä¾›çš„åŠŸèƒ½ï¼Œå®ƒèƒ½ç¡®ä¿è¿œç¨‹åº“çš„é…ç½®æ–‡ä»¶æ›´æ–°åå®¢æˆ·ç«¯ä¸­çš„é…ç½®ä¿¡æ¯ä¹Ÿå¾—åˆ°æ›´æ–°ã€‚")]),s._v(" "),t("p",[s._v("å™¢å™¢ï¼Œè¿™è¿˜å·®ä¸å¤šã€‚æˆ‘å»æŸ¥æŸ¥æ€ä¹ˆç”¨ã€‚")]),s._v(" "),t("p",[s._v("æ…¢ç€ï¼Œå¬æˆ‘è¯´å®Œï¼Œ"),t("code",[s._v("Webhooks")]),s._v(" è™½ç„¶èƒ½è§£å†³ï¼Œä½†æ˜¯ä½ äº†è§£ä¸€ä¸‹ä¼šå‘ç°å®ƒæ ¹æœ¬ä¸é€‚åˆç”¨äºç”Ÿäº§ç¯å¢ƒï¼Œæ‰€ä»¥åŸºæœ¬ä¸ä¼šä½¿ç”¨å®ƒçš„ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/1ada747175704ecba3507074847002d0-new-imagee5249fee-c5ee-4472-9983-f1bd5801387c.png",alt:""}})]),s._v(" "),t("p",[s._v("è€Œä¸€èˆ¬æˆ‘ä»¬ä¼šä½¿ç”¨ "),t("code",[s._v("Bus")]),s._v(" æ¶ˆæ¯æ€»çº¿ + "),t("code",[s._v("Spring Cloud Config")]),s._v(" è¿›è¡Œé…ç½®çš„åŠ¨æ€åˆ·æ–°ã€‚")]),s._v(" "),t("h2",{attrs:{id:"å¼•å‡º-spring-cloud-bus"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å¼•å‡º-spring-cloud-bus"}},[s._v("#")]),s._v(" å¼•å‡º Spring Cloud Bus")]),s._v(" "),t("blockquote",[t("p",[s._v("ç”¨äºå°†æœåŠ¡å’ŒæœåŠ¡å®ä¾‹ä¸åˆ†å¸ƒå¼æ¶ˆæ¯ç³»ç»Ÿé“¾æ¥åœ¨ä¸€èµ·çš„äº‹ä»¶æ€»çº¿ã€‚åœ¨é›†ç¾¤ä¸­ä¼ æ’­çŠ¶æ€æ›´æ”¹å¾ˆæœ‰ç”¨ï¼ˆä¾‹å¦‚é…ç½®æ›´æ”¹äº‹ä»¶ï¼‰ã€‚")])]),s._v(" "),t("p",[s._v("ä½ å¯ä»¥ç®€å•ç†è§£ä¸º "),t("code",[s._v("Spring Cloud Bus")]),s._v(" çš„ä½œç”¨å°±æ˜¯"),t("strong",[s._v("ç®¡ç†å’Œå¹¿æ’­åˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„æ¶ˆæ¯")]),s._v("ï¼Œä¹Ÿå°±æ˜¯æ¶ˆæ¯å¼•æ“ç³»ç»Ÿä¸­çš„å¹¿æ’­æ¨¡å¼ã€‚å½“ç„¶ä½œä¸º "),t("strong",[s._v("æ¶ˆæ¯æ€»çº¿")]),s._v(" çš„ "),t("code",[s._v("Spring Cloud Bus")]),s._v(" å¯ä»¥åšå¾ˆå¤šäº‹è€Œä¸ä»…ä»…æ˜¯å®¢æˆ·ç«¯çš„é…ç½®åˆ·æ–°åŠŸèƒ½ã€‚")]),s._v(" "),t("p",[s._v("è€Œæ‹¥æœ‰äº† "),t("code",[s._v("Spring Cloud Bus")]),s._v(" ä¹‹åï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªç®€å•çš„è¯·æ±‚ï¼Œå¹¶ä¸”åŠ ä¸Š "),t("code",[s._v("@ResfreshScope")]),s._v(" æ³¨è§£å°±èƒ½è¿›è¡Œé…ç½®çš„åŠ¨æ€ä¿®æ”¹äº†ï¼Œä¸‹é¢æˆ‘ç”»äº†å¼ å›¾ä¾›ä½ ç†è§£ã€‚")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://bitbucket.org/xu12345/document/raw/114a5f5c292cc412cd46304dc1d20cfda7c7a7f8/imgs/java/spring-cloud/springcloud-bus-s213dsfsd.jpg",alt:""}})]),s._v(" "),t("h2",{attrs:{id:"æ€»ç»“"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[s._v("#")]),s._v(" æ€»ç»“")]),s._v(" "),t("p",[s._v("è¿™ç¯‡æ–‡ç« ä¸­æˆ‘å¸¦å¤§å®¶åˆæ­¥äº†è§£äº† "),t("code",[s._v("Spring Cloud")]),s._v(" çš„å„ä¸ªç»„ä»¶ï¼Œä»–ä»¬æœ‰")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("Eureka")]),s._v(" æœåŠ¡å‘ç°æ¡†æ¶")]),s._v(" "),t("li",[t("code",[s._v("Ribbon")]),s._v(" è¿›ç¨‹å†…è´Ÿè½½å‡è¡¡å™¨")]),s._v(" "),t("li",[t("code",[s._v("Open Feign")]),s._v(" æœåŠ¡è°ƒç”¨æ˜ å°„")]),s._v(" "),t("li",[t("code",[s._v("Hystrix")]),s._v(" æœåŠ¡é™çº§ç†”æ–­å™¨")]),s._v(" "),t("li",[t("code",[s._v("Zuul")]),s._v(" å¾®æœåŠ¡ç½‘å…³")]),s._v(" "),t("li",[t("code",[s._v("Config")]),s._v(" å¾®æœåŠ¡ç»Ÿä¸€é…ç½®ä¸­å¿ƒ")]),s._v(" "),t("li",[t("code",[s._v("Bus")]),s._v(" æ¶ˆæ¯æ€»çº¿")])]),s._v(" "),t("p",[s._v("å¦‚æœä½ èƒ½è¿™ä¸ªæ—¶å€™èƒ½çœ‹æ‡‚æ–‡é¦–é‚£å¼ å›¾ï¼Œä¹Ÿå°±è¯´æ˜äº†ä½ å·²ç»å¯¹ "),t("code",[s._v("Spring Cloud")]),s._v(" å¾®æœåŠ¡æœ‰äº†ä¸€å®šçš„æ¶æ„è®¤è¯†ã€‚")])])}),[],!1,null,null,null);t.default=e.exports}}]);