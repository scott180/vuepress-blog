(window.webpackJsonp=window.webpackJsonp||[]).push([[82],{539:function(s,a,t){"use strict";t.r(a);var n=t(25),r=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"ldapnote"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ldapnote"}},[s._v("#")]),s._v(" ldapNote")]),s._v(" "),a("br"),s._v(" "),a("blockquote",[a("p",[s._v("ldap笔记 --20190403")])]),s._v(" "),a("br"),s._v(" "),a("h2",{attrs:{id:"_1、介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、介绍"}},[s._v("#")]),s._v(" 1、介绍")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LADP")]),s._v("基本介绍\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LDAP")]),s._v("（轻量级目录访问协议）以目录的形式来管理资源（域用户，用户组，地址簿，邮件用户，打印机等等）。\nhttps"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cnblogs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("itzxy"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9566548.")]),s._v("html\n\n特点：\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LDAP")]),s._v("是一种网略协议而不是数据库，而且"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LDAP")]),s._v("的目录不是关系型的，没有"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RDBMS")]),s._v("那么复杂，"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LDAP")]),s._v("不支持数据库的"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Transaction")]),s._v("机制，纯粹的无状态，请求"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("响应的工作模式。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LDAP")]),s._v("不能存储"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BOLB")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LDAP")]),s._v("的读写操作是非对称的，读的方便，写的比较麻烦，"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LDAP")]),s._v("支持复杂的查询过滤器。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LDAP")]),s._v("使用树状结构，接近于公司组织结构，文件目录结构，域名结构等。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LDAP")]),s._v("使用简单，接口标准，并支持"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("SSL")]),s._v("访问。\n\n用途：\n信息安全类：数字证书管理，授权管理，单点登陆\n科学计算类："),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("DCE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("分布式计算环境"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("，"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("UDDI")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("统一描述，发现和集成协议"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n网络资源管理类："),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MAIL")]),s._v("系统，"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DNS")]),s._v("系统，网络用户管理，电话号码簿。\n电子政府资源管理类：内网组织信息服务，电子政务目录体系，人口基础库，法人基础库。\n\n结构：\n一颗目录信息树有若干条目（"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Entry")]),s._v("）组成，每一个条目有唯一的标识名"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("DN")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Distingushed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("条目可以用来描述用户账号，打印机和计算机等对象。一个条目是一个对象，每个条目有多个属性（"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Attribute")]),s._v("）组成，每一属性有一个类型和一个到多个值组成，每个属性可以对应一个或多个值（"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Value")]),s._v("）。\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("h2",{attrs:{id:"_2、安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、安装"}},[s._v("#")]),s._v(" 2、安装")]),s._v(" "),a("blockquote",[a("p",[s._v("安装ldap和berkeley-db")])]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("可以使用 db-5.3.21.tar.gz 和 openldap-2.4.33.tgz\n\n安装ldap参考   https://blog.csdn.net/qiang359503893/article/details/44858491\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、安装Berkeley DB\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" http://download.oracle.com/berkeley-db/db-4.6.21.tar.gz\n解压缩\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf berkeley-db-4.6.21.tar.gz\n配置，编译，安装.\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" db-4.6.21/build_unix/\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/dist/configure "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--prefix")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/berkeleyDB\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("、\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n\n注意：安装完成后把执行\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  cp /usr/local/berkeleyDB/include/* /usr/include/")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  cp /usr/local/berkeleyDB/lib/* /usr/lib/")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、配置berkeleyDB 环境变量\nvi "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("~")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bash_profile\n添加：\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("CPPFLAGS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-I/usr/local/berkeleyDB/include"')]),s._v("\nexport "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("CPPFLAGS")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LDFLAGS")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-L/usr/local/lib -L/usr/local/berkeleyDB/lib -R/usr/local/berkeleyDB/lib"')]),s._v("\nexport "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("LDFLAGS")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LD_LIBRARY_PATH")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/berkeleyDB/lib"')]),s._v("\nexport "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LD_LIBRARY_PATH")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、安装openLDAP\n wget ftp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ftp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("org"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("pub"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("OpenLDAP")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("release"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.4")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".40")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tgz\n\n# tar "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("xzvf  openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.4")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".15")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("tgz\n# cd openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.4")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".15")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("\n# "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("/configure "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("--")]),s._v("prefix"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap\n# make depend\n# make "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" make install\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("h2",{attrs:{id:"_3、配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、配置"}},[s._v("#")]),s._v(" 3、配置")]),s._v(" "),a("blockquote",[a("p",[s._v("设置lapd配置文件 及导入初始化数据")])]),s._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[s._v("安装完成后配置slapd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n注：Slapd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf 位于"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("插入下面六条记录\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("cosine"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("schema \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("inetorgperson"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("schema \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("nis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("schema\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("schema\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("user"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("schema\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("schema\n\n以及\n\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[s._v("Indices to maintain")])]),s._v("\nindex objectClass                       eq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("pres \nindex ou"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("cn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("mail"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("surname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("givenname      eq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("pres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("sub \nindex uidNumber"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("gidNumber"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("loginShell    eq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("pres \nindex uid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("memberUid                     eq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("pres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("sub \nindex nisMapName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("nisMapEntry            eq"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("pres"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("sub\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("将schema文件夹下的文件拖入路径为：\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("schema下的user，group，org三个schema\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("div",{staticClass:"language-sql line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("设置密码 root "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v(" pwd12344\n\nvi "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("local")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("etc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("slapd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("conf\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("database")]),s._v("         "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("bdb")]),s._v("\nsuffix          "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dc=stech,dc=com"')]),s._v("\nrootdn          "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cn=root,dc=stech,dc=com"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Cleartext passwords, especially for the rootdn, should")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# be avoid.  See slappasswd(8) and slapd.conf(5) for details.")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Use of strong authentication encouraged.")]),s._v("\nrootpw          {MD5}"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("jnSmZCVnBZyaTmptpc73w"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('产生加密密码散列的方法是使用slappasswd命令，用-h选项指明加密时使用的方式。示例如下：\n[root@localhost openldap]# /usr/local/openldap/sbin/slappasswd -h {MD5}\nNew password: \nRe-enter new password: \n{MD5}5jnSmZCVnBZyaTmptpc73w==\n\n\n设置读写权限\nhttp://blog.sina.com.cn/s/blog_4152a9f50100qw9w.html\nhttp://www.cnitblog.com/tacimoto/archive/2006/12/19/20773.html\n\naccess to * \n\t\tby anonymous auth\n\t\tby dn.subtree="ou=aclUsers,dc=stech,dc=com"  write\n\t\tby dn.subtree="ou=aclDisabledUsers,dc=stech,dc=com"  none\n\t\tby * read\n\naccess to dn.subtree="dc=stech,dc=com" \n\t\tby anonymous  auth\n        by dn.subtree="ou=aclUsers,dc=stech,dc=com"  write\n\t\tby dn.subtree="ou=aclDisabledUsers,dc=stech,dc=com"  none\t\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("权限控制\n\t普通用户 ou=people\n\t\t能通过登录验证，但是进入软件时:LDAP error:无此对象\n\t\n\t禁用账号 ou=aclDisabledUsers  \n\t\t能通过登录验证，但是进入软件时:LDAP error:无此对象\n\n\t只读账号 ou=aclReadUsers  \n\t\t能登录，能查看所有用户，不能维护（增删改都没有权限）\n\n\t读写账号 ou=aclUsers\n\t\t登录，增删改查都可以\n\t\t\n\t指定账户授权\n\t\n\t隐藏密码\n\t\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("hr"),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v("启动LDAP\n　\t/usr/local/openldap/libexec/slapd  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d256")]),s._v(" \n\n/usr/local/etc/libexec/slapd\n\n关闭LDAP\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-INT")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /usr/local/openldap/var/run/slapd.pid"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v("\n\t（或者 "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" ldap    再  "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("kill")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-9")]),s._v(" id）\n\n查看ldap是否运行\n\t/usr/local/openldap/bin/ldapsearch "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-b")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" base"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'(objectclass=*)'")]),s._v("\n\n通过配置文件导入数据\n \n\t/usr/local/openldap/bin/ldapadd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-W")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cn=root,dc=stech,dc=com"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v("  /usr/local/openldap/bin/ldap-initData.ldif\n \n\t/usr/local/openldap/bin/ldapadd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cn=root,dc=stech,dc=com"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" pwd12344 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" /usr/local/openldap/bin/ldap-initData.ldif\n\n\t/usr/local/openldap/bin/ldapadd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-W")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cn=root,dc=stech,dc=com"')]),s._v("\n\n备份\n\t/usr/local/openldap/sbin/slapcat "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" backup.ldif\n\t/usr/local/openldap/sbin/slapcat "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" /usr/local/openldap/bin/backup.ldif\n\n查询条目\n\t/usr/local/openldap/bin/ldapsearch "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-b")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dc=stech,dc=com"')]),s._v("\n\t/usr/local/openldap/bin/ldapsearch "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-b")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"uid=test2,ou=people,dc=stech,dc=com"')]),s._v("\n\t/usr/local/openldap/bin/ldapsearch "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-b")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"uid=0121140114,ou=People,dc=shcc,dc=edu,dc=cn"')]),s._v("\n\n删除\n\t/usr/local/openldap/bin/ldapdelete "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'cn=root,dc=stech,dc=com'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" pwd12344 "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'uid=test2,ou=people,dc=stech,dc=com'")]),s._v(" \n \n导入数据（如果是备份的数据，需要过滤掉系统信息）\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、新建过滤正则表达式slapcat.regex\n\t\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/openldap/sbin/\n\t\t\n\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("slapcat.regex "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v("EOF\n\t\t/^creatorsName: /d\n\t\t/^createTimestamp: /d\n\t\t/^modifiersName: /d\n\t\t/^modifyTimestamp: /d\n\t\t/^structuralObjectClass: /d\n\t\t/^entryUUID: /d\n\t\t/^entryCSN: /d\n\t\tEOF\n\t\n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、过滤系统信息\n\t\t"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" backup.ldif "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sed")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" slapcat.regex "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" backup1.ldif\n \n\t"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、导入数据\n\t\t/usr/local/openldap/bin/ldapadd "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-x")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-D")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cn=root,dc=stech,dc=com"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-w")]),s._v(" pwd12344 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" backup1.ldif\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br")])]),a("h2",{attrs:{id:"_4、报错"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、报错"}},[s._v("#")]),s._v(" 4、报错")]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("启动"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("LDAP")]),s._v("报错\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("libexec"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("slapd  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d256\n5b62c60d @"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" $OpenLDAP"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" slapd "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.4")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".33")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Aug  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("28")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" $\n\troot@localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("localdomain"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("src"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.4")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".33")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("servers"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("slapd\n5b62c60d bdb_db_open"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" warning "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" no "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DB_CONFIG")]),s._v(" file found "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" directory "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\nExpect poor performance "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" suffix "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dc=stech,dc=com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n5b62c60d "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bdb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("stech"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BDB1539")]),s._v(" Build signature doesn't match environment\n5b62c60d bdb_db_open"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" database "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dc=stech,dc=com"')]),s._v(" cannot be opened"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" err "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30969.")]),s._v(" Restore from backup"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n5b62c60d "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bdb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("stech"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("dc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("BDB1566")]),s._v(" txn_checkpoint "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("interface")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("requires")]),s._v(" an environment configured "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" the transaction subsystem\n5b62c60d bdb_db_close"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" database "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dc=stech,dc=com"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" txn_checkpoint failed"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" Invalid "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("argument")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n5b62c60d "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("backend_startup_one")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("type"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("bdb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" suffix"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dc=stech,dc=com"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" bi_db_open failed"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("30969")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n5b62c60d bdb_db_close"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" database "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"dc=stech,dc=com"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" alock_close failed\n5b62c60d slapd stopped"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n\n缺少配置文件\ncd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("data\ncp "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DB_CONFIG")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("example "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("DB_CONFIG")]),s._v("\n\n或者删除"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("data目录下\n alock  __db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("001")]),s._v("  __db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("002")]),s._v("  __db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("003")]),s._v("  __db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("004")]),s._v("  __db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("005")]),s._v("  __db"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("006")]),s._v(" 等等\n \n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("===")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" \n \n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@localhost bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("libexec"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("slapd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("d256\n5b63bd23 @"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("#"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" $OpenLDAP"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" slapd "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.4")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".33")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Aug  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2018")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("08")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("03")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" $\n\troot@localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("localdomain"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("src"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.4")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".33")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("servers"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("slapd\n5b63bd23 daemon"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" failed errno"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Address already "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" use"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n5b63bd23 daemon"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" failed errno"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("98")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Address already "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" use"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n5b63bd23 slapd stopped"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n5b63bd23 connections_destroy"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" nothing to destroy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n\nps "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("ef"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("grep ldap\nkill "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br")])]),a("hr"),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("导入备份的ldif数据报错\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@localhost")]),s._v(" sbin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("# "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("openldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bin"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ldapadd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("D")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cn=root,dc=stech,dc=com"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("w pwd12344 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f test2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ldif \nadding "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" entry "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"uid=test2,ou=people,dc=stech,dc=com"')]),s._v("\nldap_add"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Constraint")]),s._v(" violation "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("19")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tadditional info"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" structuralObjectClass"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" no user modification allowed\n\nhttps"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("www"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cnblogs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ccdc"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("p"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3356518.")]),s._v("html\n分析原因：slapcat备份出来的ldapback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ldif中有系统自动生成的系统信息不能导入需要清除\n\n解决方案：清除ldapback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ldif中的系统信息\n\n步骤：\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("、新建过滤正则表达式slapcat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("regex\n\ncat "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("slapcat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("regex "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EOF")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v("creatorsName"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("d\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v("createTimestamp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("d\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v("modifiersName"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("d\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v("modifyTimestamp"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("d\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v("structuralObjectClass"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("d\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v("entryUUID"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("d\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("^")]),s._v("entryCSN"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("d\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("EOF")]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("、过滤掉系统信息\n\ncat ldapback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ldif "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" sed "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f slapcat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("regex "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" slapdata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ldif\n\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("、使用ldapadd导入\n\nldapadd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("H")]),s._v(" ldap"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".0")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v(".1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("x "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("D")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"用户"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("f slapdata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ldif "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("w 密码\n#或 服务器程序导入 初始使用可能失败\n#slapadd "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("l slapdate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("ldif\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br")])])])}),[],!1,null,null,null);a.default=r.exports}}]);